import{u as q,r as l,a as J,j as t,h as Q,i as Z,k as tt,A as et}from"./index-D6LNu3uc.js";import{T as st}from"./TitleComponent-DwM-w_37.js";import{H as d}from"./HomeBannerCard-S4K03sH2.js";import{h as m}from"./moment-C5S46NFB.js";/* empty css                  */import{R as A,A as at,X as M,Y as B,T as N,a as lt,B as ot,b as rt,c as nt,C as ct}from"./AreaChart-CfbyyOK-.js";import"./index-DcfIKM1A.js";import"./index-Chjiymov.js";const it=a=>Object.keys(a).length===0,dt=a=>{let c=a,x=0;for(;c>0;)c=Math.floor(c/10),x++;return Math.max(Math.pow(10,x),10)},jt=()=>{var _;const a=q(s=>s.auth),[c,x]=l.useState(!1),[h,k]=l.useState([]),[u,p]=l.useState(!1),[e,v]=l.useState(),[i,C]=l.useState(1),[F,T]=l.useState(0),[f,S]=l.useState(1e3),[b,V]=l.useState(1e3),[$,R]=l.useState(0),[y,Y]=l.useState(0),[j,E]=l.useState(0),[L,H]=l.useState(""),K=J();l.useEffect(()=>{const s=()=>{if(!it(a.currentAnalysisAccount)){H(a.currentAnalysisAccount.account_id+"?"+a.currentAnalysisAccount.type+"?"+a.currentAnalysisAccount.role);const O={type:a.currentAnalysisAccount.type,account_id:a.currentAnalysisAccount.account_id,role:a.currentAnalysisAccount.role,days:i},W=Q(O);Z({encrypted:W}).then(D=>{const o=tt(D.encrypted);if(v(o.data),k(o.pl),Y(o.total_pl),E(o.trade_count),typeof o.minVal=="number"&&typeof o.maxVal=="number"){const r=dt(o.maxVal);T(0),S(r)}if(typeof o.plMinVal=="number"&&typeof o.plMaxVal=="number"){const r=Math.max(Math.abs(o.plMinVal),Math.abs(o.plMaxVal)),X=r>=1e3?Math.floor(-r/1e3)*1e3:Math.floor(-r),z=r>=1e3?r%1e3===0?r:(Math.floor(r/1e3)+1)*1e3:Math.floor(r);R(X),V(z)}x(!0),setTimeout(()=>{x(!1)},2e3)})}};s();const n=setInterval(s,1e4);return()=>clearInterval(n)},[u]);const P=s=>{const n=s.target.value.split("?");K({type:et.AUTH_USER,payload:{currentAnalysisAccount:{account_id:n[0],type:n[1],role:n[2]}}}),p(!u)},G=s=>{C(parseInt(s.target.value)),p(!u)},g=s=>s.active&&s.payload&&s.payload.length?t.jsxs("div",{className:"p-3 custom-tooltip bg-black rounded-lg",children:[t.jsx("p",{className:"text-[#B8B8B8] font-bold text-[15px] text-right",children:m(s.label).format("D MMMM YYYY")}),i===1&&t.jsx("p",{className:"text-[#B8B8B8] font-bold text-sm text-right",children:m(s.label).format("hh:mm A")}),t.jsxs("p",{className:"balance pt-2 text-white text-right font-bold",children:["$ ",s.payload[0].value.toFixed(2)]})]}):null,w=s=>i!==1?`${m(s).format("D MMM")}`:`${m(s).format("DD, HH A")}`,I=s=>f>=1e3?`${(s/1e3).toFixed(1)}k`:`${s.toFixed(0)}`,U=s=>b>=1e3?`${(s/1e3).toFixed(1)}k`:`${s.toFixed(0)}`;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"my-10 w-full h-auto flex flex-col justify-center gap-4",children:[t.jsx(st,{title:"Trading Analysis"}),t.jsxs("div",{className:"mt-8 w-full flex justify-between",children:[t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("label",{className:"hidden md:block font-semibold text-white",children:"Account Name:"}),t.jsx("div",{className:"account-styled-select",children:t.jsx("select",{value:L,onChange:P,children:((_=a.accounts)==null?void 0:_.length)>0?a.accounts.map((s,n)=>t.jsx("option",{value:s.account_id+"?"+s.type+"?"+s.role,children:s.account_name},n)):t.jsx("option",{children:"No Account"})})})]}),t.jsx("div",{className:"day-styled-select",children:t.jsxs("select",{onChange:G,children:[t.jsx("option",{value:"1",children:"Daily"}),t.jsx("option",{value:"7",children:"Weekly"}),t.jsx("option",{value:"30",children:"Monthly"})]})})]}),t.jsxs("div",{className:"trading-analysis-select-card w-full",children:[t.jsx(d,{text:"Account Type",title:(e==null?void 0:e.type)==="tll"?"TL - Live":(e==null?void 0:e.type)==="tld"?"TL - Demo":(e==null?void 0:e.type)==="mt4"?"MT4":(e==null?void 0:e.type)==="mt5"?"MT5":"",background_left_img:"home-banner-card1-left.webp",background_right_img:"home-banner-card1-right.webp",className:"w-full h-[130px]",className1:"text-white"}),t.jsx(d,{text:"Account Role",title:e==null?void 0:e.role,background_left_img:"home-banner-card2-left.webp",background_right_img:"home-banner-card2-right.webp",className:"w-full h-[130px]",className1:"text-white"}),t.jsx(d,{text:"Register Date",title:e?m(e==null?void 0:e.registered_at).format("YY/MM/DD"):"",background_left_img:"home-banner-card3-left.webp",background_right_img:"home-banner-card3-right.webp",className:"w-full h-[130px]",className1:"text-white"})]}),t.jsx("div",{className:"mt-10 w-full h-[400px] lg:flex-row items-center justify-between",children:t.jsxs("div",{className:`backdrop-blur-xl h-full border-[2px] border-color4 rounded-xl 
          flex flex-col py-8`,children:[t.jsx("h2",{className:"mb-8 pl-8 text-white text-2xl font-bold",children:"Ballance Chart"}),t.jsx(A,{width:"100%",height:"80%",children:t.jsxs(at,{width:500,height:300,data:h,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"fillGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#907DFF",stopOpacity:.29}),t.jsx("stop",{offset:"100%",stopColor:"#D6D6D6",stopOpacity:0})]})}),t.jsx(M,{dataKey:"date",tickFormatter:w,interval:i===1?4:i===7?0:5,tick:{fill:"#B8B8B8"}}),t.jsx(B,{tick:{fill:"#B8B8B8"},tickFormatter:I,domain:[F,f]}),t.jsx(N,{content:t.jsx(g,{})}),t.jsx(lt,{type:"monotone",dataKey:"balance",stroke:"#D205B3",fill:"url(#fillGradient)",dot:!1})]})})]})}),t.jsx("div",{className:"my-10 w-full h-[400px] lg:flex-row items-center justify-between",children:t.jsxs("div",{className:`backdrop-blur-xl h-full border-[2px] border-color4 rounded-xl 
          flex flex-col py-8`,children:[t.jsx("h2",{className:"mb-8 pl-8 text-white text-2xl font-bold",children:"Profit & Loss (PnL)"}),t.jsx(A,{width:"100%",height:"80%",children:t.jsxs(ot,{width:500,height:300,data:h,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(M,{dataKey:"date",tickFormatter:w,interval:i===1?4:i===7?0:5,tick:{fill:"#B8B8B8"}}),t.jsx(B,{tick:{fill:"#B8B8B8"},tickFormatter:U,domain:[$,b]}),t.jsx(N,{content:t.jsx(g,{}),cursor:{fill:"#907DFF29"}}),t.jsx(rt,{y:0,stroke:"#B8B8B8"}),t.jsx(nt,{dataKey:"pl",maxBarSize:40,children:h==null?void 0:h.map((s,n)=>t.jsx(ct,{fill:s.pl>0?"#39DC01":"#E2293B",stroke:s.pl>0?"#39DC01":"#E2293B"},`Cell-${n}`))})]})})]})}),t.jsxs("div",{className:"trading-analysis-bottom w-full flex items-center justify-between",children:[t.jsx(d,{text:"Account Balance ($)",title:e!=null&&e.account_balance?e==null?void 0:e.account_balance.toFixed(2):"0",background_left_img:"home-banner-card1-left.webp",background_right_img:"home-banner-card1-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`}),t.jsx(d,{text:"Win Rate (%)",title:e&&(e==null?void 0:e.win_count)+(e==null?void 0:e.lose_count)>0?((e==null?void 0:e.win_count)/((e==null?void 0:e.win_count)+(e==null?void 0:e.lose_count))*100).toFixed(2)+" %":"0 %",background_left_img:"home-banner-card2-left.webp",background_right_img:"home-banner-card2-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`}),t.jsx(d,{text:"Total P/L ($)",title:y?y.toFixed(2):"0",background_left_img:"home-banner-card3-left.webp",background_right_img:"home-banner-card3-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`}),t.jsx(d,{text:"Trade Counts",title:j?j.toString():"0",background_left_img:"home-banner-card4-left.webp",background_right_img:"home-banner-card4-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`})]})]})})};export{jt as default};
