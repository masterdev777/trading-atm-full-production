import{j as e,B as I,u as V,r as t,b as W,a as G,t as x,e as D,l as H,k as K}from"./index-DrNo_W5z.js";import{s as J,a as Q,c as X,b as Z,g as m}from"./DashboardActions-DM-LwwvM.js";import{T as ss}from"./TitleComponent-BP6yJdDm.js";import{C as es}from"./CustomPagination-DmoonDVj.js";import{D as as}from"./DataLoading-DSzbgBrH.js";import{h as rs}from"./moment-C5S46NFB.js";/* empty css                      */import{B as os}from"./ButtonComponentWhite-C4kwPDu7.js";import{M as ts}from"./index-BgvsOYBT.js";/* empty css                  */import"./zoom-BdflRrpw.js";import"./index-DcfIKM1A.js";const cs=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-6 copier-accounts-column",children:e.jsxs("div",{className:"copier-accounts-item h-[40px] flex text-base text-color5 border-b-2 border-color4",children:[e.jsx("div",{className:"basis-[25%] flex justify-end",children:"ACCOUNT NAME"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"PnL ($)"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"Next Billing"}),e.jsx("div",{className:"pl-6 basis-[15%] flex justify-start",children:"TYPE"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"My Master"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"STATUS"}),e.jsx("div",{className:"basis-[10%] flex justify-center",children:"ACTION"})]})})}),ns=({isOpen:v,setIsOpen:n,modalPrice:o,handleDisconnect:b})=>{const p=()=>{n(!1)};return e.jsx(e.Fragment,{children:e.jsx(ts,{open:v,centered:!0,width:600,onCancel:()=>n(!1),maskClosable:!1,className:"delete-account-confirm-modal",footer:!1,children:e.jsxs("div",{className:"px-6 py-10 flex flex-col gap-10 md:px-10 ",children:[e.jsxs("p",{className:"text-xl text-white",children:["To proceed with the disconnection of this account, you need to pay for copy trading ($ ",o.toFixed(2),"). Are you certain to continue?"]}),e.jsx("div",{className:"w-full flex items-center justify-end",children:e.jsxs("div",{className:"w-full grid grid-cols-1 items-center justify-between gap-5 sm:grid-cols-2 sm:w-[350px]",children:[e.jsx(I,{className:"w-full h-[56px]",text:"Continue",handleClick:()=>b()}),e.jsx(os,{className:"w-full h-[56px]",text:"Cancel",handleClick:p})]})})]})})})},$=({isDataLoading:v,data:n,isChange:o,setIsChange:b})=>{const p=V(s=>s.auth),[c,u]=t.useState(0),[A,r]=t.useState(!1),[j,L]=t.useState(5),[R,_]=t.useState(!1),[B,g]=t.useState({}),[S,q]=t.useState(0),y=W(),l=G(),N=(s,a,i,h)=>{s&&y(`/dashboard/copiers/action?account_id=${a}&my_master=${i}&account_type=${h}&action=new`)},E=(s,a,i,h)=>{r(!0),(s==="Running"||s==="Stopped"||s==="Connected")&&(y(`/dashboard/copiers/action?account_id=${a}&my_master=${i}&account_type=${h}&action=change`),r(!1))},P=async(s,a,i,h,C)=>{if(r(!0),s==="Running")x.warning("This account is in Running mode!"),r(!1);else{const k=D({copier_acc_id:a,copier_acc_type:i,master_acc_id:h,my_master_type:C});await l(J({encrypted:k})).then(f=>{f===200&&(b(!o),x.success("Start trading from now!"),l(H())),f===201&&x.warning("Insufficient balance! To start trading, you need to charge balance."),r(!1)}).catch(()=>{x.error("Network status error!"),r(!1)})}},z=async(s,a,i,h,C)=>{if(r(!0),s!=="Running")x.warning("This account is not in Running mode!"),r(!1);else{const k=D({copier_acc_id:a,copier_acc_type:i,master_acc_id:h,my_master_type:C});await l(Q({encrypted:k})).then(()=>{b(!o),x.success("Successfully stopped trading!"),r(!1),l(H())}).catch(()=>{r(!1),x.error("Network status error!")})}},w=async(s,a,i,h,C)=>{if(s==="Running"||s==="Stopped"||s==="Connected"){const T={copier_acc_id:a,copier_acc_type:i,master_acc_id:h,my_master_type:C};g(T);const k=D(T);await l(X({encrypted:k})).then(async f=>{f.status===200&&await M(T),f.status===202&&(q(f.data.amount),_(!0)),f.status===203&&x.warning(`You are unable to disconnect due to an outstanding price that needs to be settled ($ ${f.data.amount}). But you have not engough balance.`)})}else x.warning("This account has no master.")},M=async s=>{r(!0);const a=D(s);await l(Z({encrypted:a})).then(()=>{b(!o),x.success("Successfully disconnected master."),r(!1),_(!1),l(H())}).catch(()=>{x.error("Network status error!"),r(!1)})},F=s=>{const a=parseInt(s.target.value);L(a),u(0)},Y=()=>{u(c===0?0:c-1)},d=()=>{(c+1)*j>=n.length?u(c):u(c+1)},O=(s,a,i)=>{y(`/dashboard/copiers/copiersetting?account_id=${a}&type=${i}&status=${s}`)},U=(s,a)=>{y(`/dashboard/copiers/tradinghistory?account_id=${s}&type=${a}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"copier-accounts-box customized-scrollbar-x overflow-x-auto mx-auto",children:[e.jsx(cs,{}),e.jsx("div",{className:`customized-scrollbar-y overflow-y-auto copier-accounts-data mx-auto flex flex-col ${!n.length&&"items-center justify-center"}`,children:v?e.jsx(as,{}):n.length>0?n.map((s,a)=>a<(c+1)*j&&a>=c*j&&e.jsxs("div",{className:"copier-accounts-item h-[80px] flex items-center border-b-color4 border-b-2",children:[e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center",children:e.jsxs("div",{className:"relative w-[64px] h-[64px] border-color2 border-2 rounded-full",children:[p.user.avatar?e.jsx("img",{src:p.user.avatar,alt:"Copier Account Avatar",title:"This is avatar for account",className:"w-[60px] h-[60px] rounded-full"}):e.jsx("img",{src:"/icons/user-icon.webp",alt:"User icon",title:"This is default avatar",className:"w-[60px] h-[60px] rounded-full"}),e.jsx("img",{src:"/icons/verify-icon.webp",alt:"Verify icon",title:"This is checkmark icon",className:"absolute bottom-[0px] right-[0px]  w-[15px] h-[15px]"})]})}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[100px] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s==null?void 0:s.account_name})}),e.jsx("div",{className:`h-[80px] basis-[15%] flex justify-end items-center ${(s==null?void 0:s.total_pl_amount)>0?"text-positivecolor":"text-color2"} text-base`,children:"$ "+(s!=null&&s.total_pl_amount?s==null?void 0:s.total_pl_amount.toFixed(2):0)}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:rs(s==null?void 0:s.next_billing_date).format("YYYY/MM/DD")}),e.jsxs("div",{className:"pl-6 h-[80px] basis-[15%] flex justify-start items-center text-white text-base",children:[(s==null?void 0:s.type)==="mt4"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader4-square.webp",alt:"Metatrader4 square icon",title:"This is square logo to show metatrader4",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 4"})]}),(s==null?void 0:s.type)==="mt5"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader5-square.webp",alt:"Metatrader5 square icon",title:"This is square logo to show metatrader5",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 5"})]}),(s==null?void 0:s.type)==="tll"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",alt:"Tradelocker square icon",title:"This is square logo to show tradelocker",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - Li"})]}),(s==null?void 0:s.type)==="tld"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",alt:"Tradelocker square icon",title:"This is square logo to show tradelocker",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - De"})]})]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[100px] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s!=null&&s.my_master_name?s==null?void 0:s.my_master_name:"Not Set"})}),e.jsxs("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:[(!(s!=null&&s.status)||(s==null?void 0:s.status)==="Nothing")&&(s!=null&&s.permission?e.jsx("p",{className:"text-white",children:"N/A"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Connected"&&(s!=null&&s.permission?e.jsx("p",{className:"text-color1",children:"Connected"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Stopped"&&(s!=null&&s.permission?e.jsx("p",{className:"text-[#E66C12]",children:"Stopped"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Running"&&(s!=null&&s.permission?e.jsx("p",{className:"text-[#39DC01]",children:"Running"}):e.jsx("p",{className:"text-color2",children:"Running"}))]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-center items-center text-white",children:s!=null&&s.status&&(s==null?void 0:s.status)!=="Nothing"?e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`w-[30px] h-[30px] border border-color4 
                              rounded-md flex items-center justify-center text-[28px]
                              ${(s==null?void 0:s.permission)&&"hover:border-color2 hover:text-color2"} cursor-pointer duration-300`,children:e.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("g",{id:"SVGRepo_iconCarrier",children:e.jsx("path",{className:`fill-white ${(s==null?void 0:s.permission)&&"group-hover:fill-color2"} duration-300`,d:`M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 
                                    28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 
                                    364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 
                                    49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 
                                    1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 
                                    109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 
                                    828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 
                                    1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 
                                    357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 
                                    32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 
                                    42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 
                                    64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 
                                    20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 
                                    27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 
                                    113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 
                                    20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 
                                    288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 
                                    1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 
                                    24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 
                                    128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z`})})]})}),e.jsx("div",{className:`z-10 absolute right-0 w-48 bg-color3 border border-color4 rounded-lg ${s!=null&&s.permission?A?"hidden":"hidden group-hover:block":"hidden"}`,children:e.jsxs("ul",{className:"px-4 py-3 text-sm text-white",children:[e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>P(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Start Trading"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>z(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Stop Trading"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>E(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.my_master_id,s==null?void 0:s.type),children:"Change Master"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>w(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Disconnect Master"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>O(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type),children:"Manage Copier"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>U(s==null?void 0:s.account_id,s==null?void 0:s.type),children:"Trading History"})]})})]}):e.jsx("div",{className:`w-[30px] h-[30px] border border-color4 
                            rounded-md flex items-center justify-center text-[28px]
                            ${(s==null?void 0:s.permission)&&"hover:border-color2 hover:text-color2"} cursor-pointer duration-300`,onClick:()=>N(s==null?void 0:s.permission,s==null?void 0:s.account_id,s==null?void 0:s.my_master_id,s==null?void 0:s.type),children:"+"})})]},a)):e.jsx("p",{className:"py-32 text-2xl text-white font-bold",children:"No account has been added."})})]}),e.jsxs("div",{className:"copier-accounts-box mx-auto relative mt-8 w-full flex flex-col gap-5 items-center  lg:flex-row lg:justify-start 2xl:justify-center",children:[e.jsx(es,{currentPage:c,totalPageNum:Math.floor(((n==null?void 0:n.length)-1)/j),handleClickPrevButton:Y,handleClickNextButton:d,setCurrentPage:u}),e.jsxs("div",{className:"flex lg:absolute lg:right-0 items-center gap-2",children:[e.jsx("label",{className:"text-white text-base",children:"Display:"}),e.jsx("div",{className:"display-styled-select",children:e.jsxs("select",{value:j,onChange:F,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})})]})]}),e.jsx(ns,{isOpen:R,setIsOpen:_,modalPrice:S,handleDisconnect:()=>M(B)})]})},Ns=()=>{const v=V(N=>N.auth),n=G(),[o,b]=t.useState(0),[p,c]=t.useState(!1),[u,A]=t.useState([]),[r,j]=t.useState([]),[L,R]=t.useState([]),[_,B]=t.useState([]),[g,S]=t.useState(!1),q=W();t.useEffect(()=>{(async()=>{S(!0);const E={user_id:v.user.id},P=D(E);await n(m({encrypted:P})).then(z=>{const w=K(z.encrypted);A(w);const M=w.filter(d=>{if(d.type==="tll"||d.type==="tld")return d});j(M);const F=w.filter(d=>{if(d.type==="mt4")return d});R(F);const Y=w.filter(d=>{if(d.type==="mt5")return d});B(Y),S(!1)})})()},[p]);const y=()=>{q("/dashboard/integrations/copiers/selectplatform")},l=N=>{b(N)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(ss,{title:"Copiers"})}),e.jsx("div",{className:"mt-8 mb-4 w-full flex justify-end",children:e.jsx(I,{text:"+ ADD",className:"h-[56px] w-full md:w-[186px]",handleClick:y})}),e.jsxs("div",{className:"relative w-full flex justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",alt:"Top left icon",title:"This is general icon",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",alt:"Top right icon",title:"This is general icon",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",alt:"Bottom left icon",title:"This is general icon",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",alt:"Bottom right icon",title:"This is general icon",className:"absolute bottom-4 right-4"}),e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto flex flex-col gap-6 items-end lg:flex-row lg:justify-between lg:items-center",children:e.jsx("div",{className:"p-2 customized-scrollbar-x w-full overflow-auto",children:e.jsxs("div",{className:"mx-auto md:mx-0 w-[460px] flex gap-6",children:[e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${o===0?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>l(0),children:"All Accounts"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${o===1?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>l(1),children:"TradeLocker"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${o===2?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>l(2),children:"MetaTrader4"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${o===3?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>l(3),children:"MetaTrader5"})]})})}),o===0&&e.jsx($,{isDataLoading:g,data:u,isChange:p,setIsChange:c}),o===1&&e.jsx($,{isDataLoading:g,data:r,isChange:p,setIsChange:c}),o===2&&e.jsx($,{isDataLoading:g,data:L,isChange:p,setIsChange:c}),o===3&&e.jsx($,{isDataLoading:g,data:_,isChange:p,setIsChange:c})]})]})]})})};export{Ns as default};
