import{b as G,a as E,r as a,j as e,B as O,t as W,g as X}from"./index-D3mr-EkT.js";import{T as Z}from"./TitleComponent-1N1_GeoH.js";import{B as K}from"./ButtonComponentWhite-D_1gDXib.js";import{u as D,f as ee,h as se,i as te}from"./DashboardActions-B9-8Vap5.js";import{D as Q}from"./DashboardLoading-CyJV7LPM.js";import{M as le}from"./MainDataLoading-Bcca1JFp.js";/* empty css                  */const ae=({account_id:v,type:R,copierData:s,setCopierData:j})=>{const C=G(),N=E(),[z,d]=a.useState(!1),[i,t]=a.useState("fixed_lot"),[x,f]=a.useState({fixed_lot:0,lot_multiplier:100,balance_multiplier:0,fixed_balance_multiplier:1e5}),[m,y]=a.useState(1),[b,k]=a.useState(1),[h,g]=a.useState("0"),[_,p]=a.useState("0"),[w,F]=a.useState(1),[S,V]=a.useState("0");a.useEffect(()=>{var n,u,c,T,L,M,I,$,A,H,q,J;s.risk_type&&t(s.risk_type),s.risk_type&&s.risk_setting&&f({...x,[s.risk_type]:s.risk_setting}),s.force_min_max&&(((n=s.force_min_max)==null?void 0:n.force_max)!==null&&y((u=s.force_min_max)!=null&&u.force_max?0:1),((c=s.force_min_max)==null?void 0:c.force_min)!==null&&k((T=s.force_min_max)!=null&&T.force_min?0:1),(L=s.force_min_max)!=null&&L.force_max_value&&g((M=s.force_min_max)==null?void 0:M.force_max_value),(I=s.force_min_max)!=null&&I.force_min_value&&p(($=s.force_min_max)==null?void 0:$.force_min_value),(A=s.force_min_max)!=null&&A.lot_refine&&F((H=s.force_min_max)!=null&&H.lot_refine?0:1),(q=s.force_min_max)!=null&&q.lot_refine_size&&V((J=s.force_min_max)==null?void 0:J.lot_refine_size))},[]);const U=n=>{t(n.target.value)},Y=n=>{const c=n.target.value.replace(/[^0-9]/g,"");f(c===""?{...x,[i]:0}:{...x,[i]:parseInt(c)})},l=async()=>{const n={accountId:v,accountType:R,riskType:i,riskSetting:i==="fixed_lot"?x.fixed_lot:i==="lot_multiplier"?x.lot_multiplier:i==="balance_multiplier"?x.balance_multiplier:x.fixed_balance_multiplier,isForceMax:m===0,isForceMin:b===0,forceMaxValue:h,forceMinValue:_,isLotRefine:w===0,lotRefineSize:S===""?"0":S};d(!0),await N(D(n)).then(u=>{W.success("Updated successfully!"),j(u),d(!1)}).catch(()=>{d(!1)})},r=()=>{C("/dashboard/copiers")},o=n=>{const c=n.target.value.replace(/(\..*?)\..*/g,"$1");g(c===""?"0":c)},P=n=>{const c=n.target.value.replace(/(\..*?)\..*/g,"$1");p(c===""?"0":c)},B=n=>{const u=n.target.value;let c;if(u.startsWith("-")?c="-"+u.replace(/[^0-9.]/g,""):c=u.replace(/[^0-9.]/g,""),(c.match(/\./g)||[]).length>1){const L=c.lastIndexOf(".");c=c.slice(0,L)}V(c===""?"":c)};return e.jsx(e.Fragment,{children:z?e.jsx(Q,{}):e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 my-12 w-full flex flex-col gap-8",children:[e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 md:gap-x-6 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Risk Type"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:U,value:i,children:[e.jsx("option",{value:"fixed_lot",children:"Fixed Lot"}),e.jsx("option",{value:"lot_multiplier",children:"Lot Multiplier"}),e.jsx("option",{value:"balance_multiplier",children:"Balance Multiplier"}),e.jsx("option",{value:"fixed_balance_multiplier",children:"Fixed Balance Multiplier"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-color5",children:[(i==="fixed_lot"||i==="balance_multiplier")&&"Risk Setting",i==="lot_multiplier"?"Lot Percentage (%)":i==="fixed_balance_multiplier"?"Fixed Balance ($)":""]}),e.jsx("input",{disabled:i==="fixed_lot"||i==="balance_multiplier",className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${i==="fixed_lot"||i==="balance_multiplier"?"text-textdisablecolor":"text-white"}`,onChange:Y,value:i==="lot_multiplier"?x.lot_multiplier:i==="fixed_balance_multiplier"?x.fixed_balance_multiplier:0})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Force Maximum Lot"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:n=>y(parseInt(n.target.value)),value:m,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Maximum Lot Size"}),e.jsx("input",{disabled:m===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${m===1?"text-textdisablecolor":"text-white"}`,value:h,onChange:o})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Force Minimum Lot"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:n=>k(parseInt(n.target.value)),value:b,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Minimum Lot Size"}),e.jsx("input",{disabled:b===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${b===1?"text-textdisablecolor":"text-white"}`,value:_,onChange:P})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Lot Refiner"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:n=>F(parseInt(n.target.value)),value:w,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Lot Refine Size"}),e.jsx("input",{disabled:w===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${w===1?"text-textdisablecolor":"text-white"}`,value:S,onChange:B})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy From Account"}),e.jsx("input",{disabled:!0,className:"select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none text-textdisablecolor",defaultValue:s.account_name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy To Account"}),e.jsx("input",{disabled:!0,className:"select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none text-textdisablecolor",defaultValue:s.my_master_name})]})]})]}),e.jsxs("div",{className:"px-6 w-full flex flex-col md:flex-row items-center justify-end gap-4",children:[e.jsx(K,{text:"GO BACK",className:"h-[56px] w-full md:w-[184px]",handleClick:r}),e.jsx(O,{text:"UPDATE",className:"h-[56px] w-full md:w-[184px]",handleClick:l})]})]})})},ie=({account_id:v,type:R,copierData:s,tradingStatus:j,setCopierData:C})=>{const N=G(),z=E(),[d,i]=a.useState(!1),[t,x]=a.useState({copy_stop_loss:0,copy_take_profit:0,fixed_stop_loss:1,fixed_take_profit:1,stop_loss_refinement:1,take_profit_refinement:1}),[f,m]=a.useState("0"),[y,b]=a.useState("0"),[k,h]=a.useState("0"),[g,_]=a.useState("0");a.useEffect(()=>{var l,r,o,P,B,n,u,c,T,L,M,I,$,A;s.follow_tp_st&&(x({copy_stop_loss:((l=s.follow_tp_st)==null?void 0:l.stop_loss)===!0?0:1,copy_take_profit:((r=s.follow_tp_st)==null?void 0:r.take_profit)===!0?0:1,fixed_stop_loss:((o=s.follow_tp_st)==null?void 0:o.fixed_stop_loss)===!0?0:1,fixed_take_profit:((P=s.follow_tp_st)==null?void 0:P.fixed_take_profit)===!0?0:1,stop_loss_refinement:((B=s.follow_tp_st)==null?void 0:B.stop_loss_refinement)===!0?0:1,take_profit_refinement:((n=s.follow_tp_st)==null?void 0:n.take_profit_refinement)===!0?0:1}),m((u=s.follow_tp_st)!=null&&u.fixed_stop_loss_size?(c=s.follow_tp_st)==null?void 0:c.fixed_stop_loss_size:"0"),b((T=s.follow_tp_st)!=null&&T.fixed_take_profit_size?(L=s.follow_tp_st)==null?void 0:L.fixed_take_profit_size:"0"),h((M=s.follow_tp_st)!=null&&M.stop_loss_refinement_size?(I=s.follow_tp_st)==null?void 0:I.stop_loss_refinement_size:"0"),_(($=s.follow_tp_st)!=null&&$.take_profit_refinement_size?(A=s.follow_tp_st)==null?void 0:A.take_profit_refinement_size:"0"))},[]);const p=(l,r)=>{const o=parseInt(r);if(isNaN(o)){console.log("Invalid value for parsing:",r);return}x(P=>({...P,[l]:o}))},w=l=>{let o=l.target.value.replace(/[^0-9]/g,"");m(o===""?"":o)},F=l=>{let o=l.target.value.replace(/[^0-9]/g,"");b(o===""?"":o)},S=l=>{const r=l.target.value;let o;r.startsWith("-")?o="-"+r.replace(/[^0-9]/g,""):o=r.replace(/[^0-9]/g,""),h(o===""?"":o)},V=l=>{const r=l.target.value;let o;r.startsWith("-")?o="-"+r.replace(/[^0-9]/g,""):o=r.replace(/[^0-9]/g,""),o===""?h(""):_(o)},U=async()=>{const l={accountId:v,accountType:R,takeProfit:t.copy_take_profit,stopLoss:t.copy_stop_loss,fixedStopLoss:t.fixed_stop_loss,fixedTakeProfit:t.fixed_take_profit,fixedStopLossSize:f===""?0:f,fixedTakeProfitSize:y===""?0:y,stopLossRefinement:t.stop_loss_refinement,takeProfitRefinement:t.take_profit_refinement,stopLossRefinementSize:k===""?"0":k,takeProfitRefinementSize:g===""?"0":g};i(!0),await z(ee(l)).then(r=>{W.success("Updated successfully!"),C(r),i(!1)}).catch(()=>{i(!1)})},Y=()=>{N("/dashboard/copiers")};return e.jsx(e.Fragment,{children:d?e.jsx(Q,{}):e.jsxs("div",{children:[e.jsx("div",{className:"px-4 my-12 w-full flex flex-col gap-8",children:e.jsxs("div",{className:"w-full grid lg:grid-cols-2 gap-x-6 gap-y-10",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy Stop Loss"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:l=>p("copy_stop_loss",l.target.value),value:t.copy_stop_loss,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy Take Profit"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:l=>p("copy_take_profit",l.target.value),value:t.copy_take_profit,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Stop Loss"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_stop_loss===1,className:"text-whtie",onChange:l=>p("fixed_stop_loss",l.target.value),value:t.fixed_stop_loss,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Stop Loss Size (pips)"}),e.jsx("input",{disabled:t.fixed_stop_loss===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.fixed_stop_loss===1||t.copy_stop_loss===1?"text-textdisablecolor":"text-white"}`,value:f,onChange:w})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Take Profit"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_take_profit===1,className:"text-whtie",onChange:l=>p("fixed_take_profit",l.target.value),value:t.fixed_take_profit,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Take Profit Size (pips)"}),e.jsx("input",{disabled:t.fixed_take_profit===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.fixed_take_profit===1||t.copy_take_profit===1?"text-textdisablecolor":"text-white"}`,value:y,onChange:F})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Stop Loss Refinement"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_stop_loss===1,className:"text-whtie",onChange:l=>p("stop_loss_refinement",l.target.value),value:t.stop_loss_refinement,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Stop Loss Refinement Size (pips)"}),e.jsx("input",{disabled:t.stop_loss_refinement===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.copy_stop_loss===1||t.stop_loss_refinement===1?"text-textdisablecolor":"text-white"}`,value:k,onChange:S})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Take Profit Refinement"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_take_profit===1,className:"text-whtie",onChange:l=>p("take_profit_refinement",l.target.value),value:t.take_profit_refinement,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Take Profit Refinement Size (pips)"}),e.jsx("input",{disabled:t.take_profit_refinement===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.copy_take_profit===1||t.take_profit_refinement===1?"text-textdisablecolor":"text-white"}`,value:g,onChange:V})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Trading Status"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-white",value:j,disabled:!0,children:[e.jsx("option",{value:"Connected",children:"Connected"}),e.jsx("option",{value:"Stopped",children:"Stopped"}),e.jsx("option",{value:"Running",children:"Running"})]})})]})]})}),e.jsxs("div",{className:"px-6 w-full flex flex-col md:flex-row items-center justify-end gap-4",children:[e.jsx(K,{text:"GO BACK",className:"h-[56px] w-full md:w-[184px]",handleClick:Y}),e.jsx(O,{text:"UPDATE",className:"h-[56px] w-full md:w-[184px]",handleClick:U})]})]})})},oe=({account_id:v,type:R,profitShare:s,copierProfitShareMethod:j,setCopierData:C})=>{const N=G(),z=E(),[d,i]=a.useState("per_hour");a.useEffect(()=>{j&&i(j)},[]);const t=()=>{N("/dashboard/copiers")},x=async()=>{await z(se({account_id:v,type:R,profit_share_method:d})).then(f=>{C(f),W.success("Updated Successfully!")})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"px-4 my-12 w-full flex flex-col gap-8",children:[e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-white",children:"Profit Share"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{value:d,onChange:f=>i(f.target.value),className:"h-12 w-40 bg-transparent text-white border-2 border-color4 rounded-lg",children:[e.jsx("option",{value:"per_hour",children:"Hourly"}),e.jsx("option",{value:"per_trade",children:"Per trade"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-white",children:"Amount ($)"}),e.jsx("input",{value:d==="per_trade"?s==null?void 0:s.per_trade:s==null?void 0:s.per_hour,className:"px-2 h-12 w-full bg-transparent text-white border-2 border-color4 rounded-lg",disabled:!0})]})]}),e.jsxs("div",{className:"px-6 w-full flex flex-col md:flex-row items-center justify-end gap-4",children:[e.jsx(K,{text:"GO BACK",className:"h-[56px] w-full md:w-[184px]",handleClick:t}),e.jsx(O,{text:"UPDATE",className:"h-[56px] w-full md:w-[184px]",handleClick:x})]})]})})},ue=()=>{const[v,R]=X(),s=E(),[j,C]=a.useState(""),[N,z]=a.useState(""),[d,i]=a.useState(0),[t,x]=a.useState(""),[f,m]=a.useState({account_id:"",type:"",follow_tp_st:{},risk_type:"",risk_setting:"",force_min_max:{},trade_setting:{},my_master_name:"",account_name:"",profit_share_method:""}),[y,b]=a.useState({}),[k,h]=a.useState(!1),g=_=>{i(_)};return a.useEffect(()=>{const _=v.get("account_id");_&&C(_);const p=v.get("type");p&&z(p);const w=v.get("status");w&&x(w),(async()=>{h(!0),await s(te(_||"",p||"")).then(S=>{m(S.data),b(S.profit_share),h(!1)}).catch(()=>{h(!1)})})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col items-center gap-10",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(Z,{title:"Copier Setting"})}),e.jsxs("div",{className:"relative w-full flex justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",className:"absolute bottom-4 right-4"}),k?e.jsx(le,{}):e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto flex flex-col gap-6 items-end lg:flex-row lg:justify-between lg:items-center",children:e.jsx("div",{className:"p-2 customized-scrollbar-x w-full overflow-auto",children:e.jsxs("div",{className:"mx-auto lg:mx-0 w-[450px] flex gap-6",children:[e.jsx("div",{className:`h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${d===0?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(0),children:"Profit Sharing"}),e.jsx("div",{className:`h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${d===1?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(1),children:"Risk Settings"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${d===2?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(2),children:"Position Settings"})]})})}),e.jsxs("div",{className:"copier-accounts-box mx-auto",children:[d===0&&e.jsx(oe,{account_id:j,type:N,profitShare:y,copierProfitShareMethod:f.profit_share_method,setCopierData:m}),d===1&&e.jsx(ae,{account_id:j,type:N,copierData:f,setCopierData:m}),d===2&&e.jsx(ie,{account_id:j,type:N,copierData:f,tradingStatus:t,setCopierData:m})]})]})]})]})})};export{ue as default};
