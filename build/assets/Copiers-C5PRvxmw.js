import{j as e,u as E,r as n,b as R,a as z,t as i,k as L,B}from"./index-D3mr-EkT.js";import{s as P,a as Y,b as q,g as A}from"./DashboardActions-B9-8Vap5.js";import{T as F}from"./TitleComponent-1N1_GeoH.js";import{C as G}from"./CustomPagination-C5xXN1I2.js";import{D as H}from"./DataLoading-9D2iJcRo.js";import{h as I}from"./moment-C5S46NFB.js";/* empty css                *//* empty css                  */const V=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-6 copier-accounts-column",children:e.jsxs("div",{className:"copier-accounts-item h-[40px] flex text-base text-color5 border-b-2 border-color4",children:[e.jsx("div",{className:"basis-[25%] flex justify-end",children:"ACCOUNT NAME"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"PnL ($)"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"Next Billing"}),e.jsx("div",{className:"pl-6 basis-[15%] flex justify-start",children:"TYPE"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"My Master"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"STATUS"}),e.jsx("div",{className:"basis-[10%] flex justify-center",children:"ACTION"})]})})}),$=({isDataLoading:_,data:t,isChange:d,setIsChange:v})=>{const b=E(s=>s.auth),[l,u]=n.useState(0),[k,o]=n.useState(!1),[f,T]=n.useState(5),g=R(),x=z(),S=(s,r,c,h)=>{s&&g(`/dashboard/copiers/action?account_id=${r}&my_master=${c}&account_type=${h}&action=new`)},D=(s,r,c,h)=>{o(!0),(s==="Running"||s==="Stopped"||s==="Connected")&&(g(`/dashboard/copiers/action?account_id=${r}&my_master=${c}&account_type=${h}&action=change`),o(!1))},M=async(s,r,c,h,C)=>{o(!0),s==="Running"?(i.warning("This account is in Running mode!"),o(!1)):await x(P(r,c,h,C)).then(()=>{v(!d),i.success("Start trading from now!"),o(!1),x(L())}).catch(()=>{i.error("Server Error!"),o(!1)})},N=async(s,r,c,h,C)=>{o(!0),s!=="Running"?(i.warning("This account is not in Running mode!"),o(!1)):await x(Y(r,c,h,C)).then(()=>{v(!d),i.success("Successfully stopped trading!"),o(!1),x(L())}).catch(()=>{o(!1),i.error("Server Error")})},j=async(s,r,c,h,C)=>{o(!0),s==="Running"||s==="Stopped"||s==="Connected"?await x(q(r,c,h,C)).then(()=>{v(!d),i.success("Successfully disconnected master."),o(!1),x(L())}).catch(()=>{i.error("Server Error"),o(!1)}):(i.warning("This account has no master."),o(!1))},p=s=>{const r=parseInt(s.target.value);T(r),u(0)},y=()=>{u(l===0?0:l-1)},w=()=>{(l+1)*f>=t.length?u(l):u(l+1)},a=(s,r,c)=>{g(`/dashboard/copiers/copiersetting?account_id=${r}&type=${c}&status=${s}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"copier-accounts-box customized-scrollbar-x overflow-x-auto mx-auto",children:[e.jsx(V,{}),e.jsx("div",{className:`customized-scrollbar-y overflow-y-auto copier-accounts-data mx-auto flex flex-col ${!t.length&&"items-center justify-center"}`,children:_?e.jsx(H,{}):t.length>0?t.map((s,r)=>r<(l+1)*f&&r>=l*f&&e.jsxs("div",{className:"copier-accounts-item h-[80px] flex items-center border-b-color4 border-b-2",children:[e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center",children:e.jsxs("div",{className:"relative w-[64px] h-[64px] border-color2 border-2 rounded-full",children:[b.user.avatar?e.jsx("img",{src:b.user.avatar,className:"w-[60px] h-[60px] rounded-full"}):e.jsx("img",{src:"/icons/user-icon.webp",className:"w-[60px] h-[60px] rounded-full"}),e.jsx("img",{src:"/icons/verify-icon.webp",className:"absolute bottom-[0px] right-[0px]  w-[15px] h-[15px]"})]})}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[100px] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s==null?void 0:s.account_name})}),e.jsx("div",{className:`h-[80px] basis-[15%] flex justify-end items-center ${(s==null?void 0:s.total_pl_amount)>0?"text-positivecolor":"text-color2"} text-base`,children:"$ "+(s!=null&&s.total_pl_amount?s==null?void 0:s.total_pl_amount.toFixed(2):0)}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:I(s==null?void 0:s.next_billing_date).format("YYYY/MM/DD")}),e.jsxs("div",{className:"pl-6 h-[80px] basis-[15%] flex justify-start items-center text-white text-base",children:[(s==null?void 0:s.type)==="mt4"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader4-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 4"})]}),(s==null?void 0:s.type)==="mt5"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader5-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 5"})]}),(s==null?void 0:s.type)==="tll"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - Li"})]}),(s==null?void 0:s.type)==="tld"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - De"})]})]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[100px] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s!=null&&s.my_master_name?s==null?void 0:s.my_master_name:"Not Set"})}),e.jsxs("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:[(!(s!=null&&s.status)||(s==null?void 0:s.status)==="Nothing")&&(s!=null&&s.permission?e.jsx("p",{className:"text-white",children:"N/A"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Connected"&&(s!=null&&s.permission?e.jsx("p",{className:"text-color1",children:"Connected"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Stopped"&&(s!=null&&s.permission?e.jsx("p",{className:"text-[#E66C12]",children:"Stopped"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Running"&&(s!=null&&s.permission?e.jsx("p",{className:"text-[#39DC01]",children:"Running"}):e.jsx("p",{className:"text-color2",children:"Running"}))]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-center items-center text-white",children:s!=null&&s.status&&(s==null?void 0:s.status)!=="Nothing"?e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`w-[30px] h-[30px] border border-color4 
                              rounded-md flex items-center justify-center text-[28px]
                              ${(s==null?void 0:s.permission)&&"hover:border-color2 hover:text-color2"} cursor-pointer duration-300`,children:e.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("g",{id:"SVGRepo_iconCarrier",children:e.jsx("path",{className:`fill-white ${(s==null?void 0:s.permission)&&"group-hover:fill-color2"} duration-300`,d:`M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 
                                    28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 
                                    364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 
                                    49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 
                                    1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 
                                    109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 
                                    828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 
                                    1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 
                                    357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 
                                    32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 
                                    42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 
                                    64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 
                                    20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 
                                    27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 
                                    113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 
                                    20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 
                                    288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 
                                    1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 
                                    24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 
                                    128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z`})})]})}),e.jsx("div",{className:`z-10 absolute right-0 w-48 bg-color3 border border-color4 rounded-lg ${s!=null&&s.permission?k?"hidden":"hidden group-hover:block":"hidden"}`,children:e.jsxs("ul",{className:"px-4 py-3 text-sm text-white",children:[e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>M(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Start Trading"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>N(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Stop Trading"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>D(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.my_master_id,s==null?void 0:s.type),children:"Change Master"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>j(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Disconnect Master"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>a(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type),children:"Manage Copier"})]})})]}):e.jsx("div",{className:`w-[30px] h-[30px] border border-color4 
                            rounded-md flex items-center justify-center text-[28px]
                            ${(s==null?void 0:s.permission)&&"hover:border-color2 hover:text-color2"} cursor-pointer duration-300`,onClick:()=>S(s==null?void 0:s.permission,s==null?void 0:s.account_id,s==null?void 0:s.my_master_id,s==null?void 0:s.type),children:"+"})})]},r)):e.jsx("p",{className:"py-32 text-2xl text-white font-bold",children:"No account has been added."})})]}),e.jsxs("div",{className:"copier-accounts-box mx-auto relative mt-8 w-full flex flex-col gap-5 items-center  lg:flex-row lg:justify-start 2xl:justify-center",children:[e.jsx(G,{currentPage:l,totalPageNum:Math.floor(((t==null?void 0:t.length)-1)/f),handleClickPrevButton:y,handleClickNextButton:w,setCurrentPage:u}),e.jsxs("div",{className:"flex lg:absolute lg:right-0 items-center gap-2",children:[e.jsx("label",{className:"text-white text-base",children:"Display:"}),e.jsx("div",{className:"display-styled-select",children:e.jsxs("select",{value:f,onChange:p,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})})]})]})]})},m=()=>{const _=E(j=>j.auth),t=z(),[d,v]=n.useState(0),[b,l]=n.useState(!1),[u,k]=n.useState([]),[o,f]=n.useState([]),[T,g]=n.useState([]),[x,S]=n.useState(!1),D=R();n.useEffect(()=>{(async()=>{await t(A(_.user.id)).then(p=>{k(p);const y=p.filter(a=>{if(a.type==="tll"||a.type==="tld")return a});f(y);const w=p.filter(a=>{if(a.type==="mt4"||a.type==="mt5")return a});g(w)})})()},[]),n.useEffect(()=>{(async()=>{S(!0),await t(A(_.user.id)).then(p=>{k(p);const y=p.filter(a=>{if(a.type==="tll"||a.type==="tld")return a});f(y);const w=p.filter(a=>{if(a.type==="mt4"||a.type==="mt5")return a});g(w),S(!1)})})()},[b]);const M=()=>{D("/dashboard/integrations/copiers/selectplatform")},N=j=>{v(j)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(F,{title:"Copiers"})}),e.jsx("div",{className:"mt-8 mb-4 w-full flex justify-end",children:e.jsx(B,{text:"+ ADD",className:"h-[56px] w-full md:w-[186px]",handleClick:M})}),e.jsxs("div",{className:"relative w-full flex justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",className:"absolute bottom-4 right-4"}),e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto flex flex-col gap-6 items-end lg:flex-row lg:justify-between lg:items-center",children:e.jsx("div",{className:"p-2 customized-scrollbar-x w-full overflow-auto",children:e.jsxs("div",{className:"mx-auto md:mx-0 w-[330px] flex gap-6",children:[e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${d===0?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>N(0),children:"All Accounts"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${d===1?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>N(1),children:"TradeLocker"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${d===2?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>N(2),children:"MetaTrader"})]})})}),d===0&&e.jsx($,{isDataLoading:x,data:u,isChange:b,setIsChange:l}),d===1&&e.jsx($,{isDataLoading:x,data:o,isChange:b,setIsChange:l}),d===2&&e.jsx($,{isDataLoading:x,data:T,isChange:b,setIsChange:l})]})]})]})})};export{m as default};
