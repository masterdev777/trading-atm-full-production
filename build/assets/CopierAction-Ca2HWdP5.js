import{j as e,u as Y,g as R,r as t,b as q,a as z,B as G,h as U,t as M}from"./index-CJc2CFJM.js";import{c as W,e as P}from"./DashboardActions-CYexjiQE.js";import{B as H}from"./ButtonComponentWhite-COzNBntd.js";import{T as K}from"./TitleComponent-D0oeR9T-.js";import{D as J}from"./DataLoading-59aE4AqW.js";import{C as Q}from"./CustomPagination-C7I-91X4.js";import{l as N}from"./stack-BlqWHnTg.js";import{h as V}from"./moment-C5S46NFB.js";/* empty css                *//* empty css                  */const X=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-6 master-accounts-column",children:e.jsxs("div",{className:"master-accounts-item h-[40px] flex text-base text-color5 border-b-2 border-color4",children:[e.jsx("div",{className:"basis-[23%] flex justify-end",children:"ACCOUNT NAME"}),e.jsx("div",{className:"basis-[12%] flex justify-end",children:"PnL ($)"}),e.jsx("div",{className:"basis-[8%] flex justify-end",children:"WIN RATE"}),e.jsx("div",{className:"pl-8 basis-[13%] flex justify-start",children:"TYPE"}),e.jsx("div",{className:"basis-[14%] flex justify-end",children:"REGISTER DATE"}),e.jsx("div",{className:"basis-[8%] flex justify-end",children:"FOLLOWS"}),e.jsx("div",{className:"basis-[12%] flex justify-end",children:"PROFIT SHARE"}),e.jsx("div",{className:"pr-2 basis-[10%] flex justify-center",children:"ACTION"})]})})}),Z=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-[320px] bg-transparent flex items-center justify-center",children:e.jsxs("div",{role:"status",className:"flex flex-col items-center gap-5",children:[e.jsx("img",{src:"/icons/preloader.gif",className:"size-[100px]",alt:"website preloader"}),e.jsx("span",{className:"text-2xl font-bold text-color5",children:"Connecting to master..."})]})})}),ee=({value:o,handleChange:a})=>e.jsx(e.Fragment,{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"custom-checkbox",checked:o,onChange:a}),e.jsx("span",{className:"custom-checkbox"})]})}),se=({isDataLoading:o,data:a,setMasterData:w,setSelectedAccId:h,setMasterType:g,isConnecting:y,currentPage:n,setCurrentPage:r,displayCount:p,setDisplayCount:_,totalCount:b})=>{const d=Y(s=>s.auth),u=(s,l)=>{const i=a.map((x,j)=>s===j?(h(x.account_id),g(l),{...x,action:!0}):{...x,action:!1});w(i)},m=s=>{const l=parseInt(s.target.value);_(l),r(0)},C=()=>{r(n===0?0:n-1)},f=()=>{(n+1)*p>=b?r(n):r(n+1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"master-accounts-box customized-scrollbar-x overflow-x-auto mx-auto",children:[e.jsx(X,{}),e.jsx("div",{className:`master-accounts-data mx-auto flex flex-col ${!(a!=null&&a.length)&&"items-center justify-center"}`,children:o?e.jsx(J,{}):y?e.jsx(Z,{}):(a==null?void 0:a.length)>0?a.map((s,l)=>{var i,x;return e.jsxs("div",{className:"master-accounts-item h-[80px] flex items-center border-b-color4 border-b-2",children:[e.jsx("div",{className:"h-[80px] basis-[8%] flex justify-end items-center",children:e.jsxs("div",{className:`relative w-[64px] h-[64px] rounded-full border-2 
                        ${s.level==="hero"?"border-herocolor":s.level==="gold"?"border-goldcolor":s.level==="silver"?"border-silvercolor":"border-color5"}`,children:[s.avatar?e.jsx("img",{src:s.avatar,className:"w-[60px] h-[60px] rounded-full"}):e.jsx("img",{src:"/icons/user-icon.webp",className:"w-[60px] h-[60px] rounded-full"}),e.jsx("img",{src:s.level==="hero"?N[3]:s.level==="gold"?N[2]:s.level==="silver"?N[1]:N[0],className:`${(s.level==="basic"||!s.level)&&"hidden"} absolute bottom-[-2px] right-[-3px]  w-[20px] h-[20px]`})]})}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[90%] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s.account_name})}),e.jsx("div",{className:`h-[80px] basis-[12%] flex justify-end items-center ${(s==null?void 0:s.total_pl_amount)>0?"text-positivecolor":"text-color2"} text-base`,children:"$ "+(s!=null&&s.total_pl_amount?s==null?void 0:s.total_pl_amount.toFixed(2):0)}),e.jsx("div",{className:`h-[80px] basis-[8%] flex justify-end items-center text-base
                        ${s.win_count+s.lose_count>0&&s.win_count/(s.win_count+s.lose_count)*100>=50?"text-positivecolor":"text-color2"}`,children:s.win_count+s.lose_count>0?(s.win_count/(s.win_count+s.lose_count)*100).toFixed(2)+" %":"0 %"}),e.jsxs("div",{className:"pl-8 h-[80px] basis-[13%] flex justify-start items-center text-white text-base",children:[s.type==="mt4"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader4-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 4"})]}),s.type==="mt5"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader5-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 5"})]}),s.type==="tll"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - Li"})]}),s.type==="tld"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - De"})]})]}),e.jsx("div",{className:"h-[80px] basis-[14%] flex justify-end items-center text-white text-base",children:V(s.registered_at).format("YYYY/MM/DD")}),e.jsxs("div",{className:"h-[80px] basis-[8%] flex justify-end items-center text-white text-base",children:[s.follows+"/",s.level==="hero"?"âˆž":s.level==="gold"?d.levelToLimit[2].limit_value:s.level==="silver"?d.levelToLimit[1].limit_value:d.levelToLimit[0].limit_value]}),e.jsx("div",{className:"h-[80px] basis-[12%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"w-full flex flex-col gap-1 items-end",children:e.jsxs("p",{className:"text-white",children:["$ ",(i=s.profit_share)!=null&&i.per_hour?(x=s.profit_share)==null?void 0:x.per_hour:"0"," / hour"]})})}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-center items-center text-white",children:e.jsx(ee,{value:s.action,handleChange:()=>u(l,s.type)})})]},l)}):e.jsx("p",{className:"text-2xl text-white font-bold",children:"No account has been added."})})]}),e.jsxs("div",{className:"master-accounts-box mx-auto relative mt-8 w-full flex flex-col gap-5 items-center lg:flex-row lg:justify-start 2xl:justify-center",children:[e.jsx(Q,{currentPage:n,totalPageNum:Math.floor((b-1)/p),handleClickPrevButton:C,handleClickNextButton:f,setCurrentPage:r}),e.jsxs("div",{className:"flex lg:absolute lg:right-0 items-center gap-2",children:[e.jsx("label",{className:"text-white text-base",children:"Display:"}),e.jsx("div",{className:"display-styled-select",children:e.jsxs("select",{value:p,onChange:m,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})})]})]})]})},he=()=>{const[o,a]=R(),[w,h]=t.useState([]),[g,y]=t.useState(""),[n,r]=t.useState("new"),[p,_]=t.useState(""),[b,d]=t.useState(""),[u,m]=t.useState(""),[C,f]=t.useState(!1),[s,l]=t.useState(!1),[i,x]=t.useState(0),[j,I]=t.useState(5),[E,B]=t.useState(0),S=q(),T=z();t.useEffect(()=>{const A=o.get("account_id");A&&y(A);const k=o.get("account_type");k&&_(k);const L=o.get("action");L&&r(L);const O=o.get("my_master");(async()=>{f(!0),await T(W(0,i,j)).then(v=>{if(v.totalCount&&B(v.totalCount),u){const D=v.accounts.map(c=>u===c.account_id?(m(c.account_id),{...c,action:!0}):{...c,action:!1});h(D)}else{const D=v.accounts.map(c=>O===c.account_id?(m(c.account_id),d(c.type),{...c,action:!0}):{...c,action:!1});h(D)}f(!1)}).catch(()=>{f(!1)})})()},[j,i]);const F=()=>{S("/dashboard/copiers")},$=async()=>{l(!0),u?await T(P(g,p,u,b,n)).then(async()=>{await T(U()),M.success("Your copier has been connected to your master. Now you can start copy trading!"),S("/dashboard/copiers"),l(!1)}).catch(()=>{l(!1)}):(M.warning("Please select your master!"),l(!1))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(K,{title:"Copiers"})}),e.jsxs("div",{className:"w-full flex flex-col sm:flex-row justify-between gap-4 md:gap-0",children:[e.jsx(H,{text:"GO BACK",className:"w-full sm:w-[180px] md:w-[216px] h-[56px]",handleClick:F}),e.jsx(G,{text:"CONNECT",className:"w-full sm:w-[180px] md:w-[216px] h-[56px]",handleClick:$})]}),e.jsxs("div",{className:"relative w-full justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",className:"absolute bottom-4 right-4"}),e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto overflow-auto",children:e.jsx("h3",{className:"customized-scrollbar-x w-[140px] text-base text-white",children:"Select Your Master"})}),e.jsx(se,{setMasterType:d,isDataLoading:C,isConnecting:s,data:w,setMasterData:h,setSelectedAccId:m,currentPage:i,setCurrentPage:x,displayCount:j,setDisplayCount:I,totalCount:E})]})]})]})})};export{he as default};
