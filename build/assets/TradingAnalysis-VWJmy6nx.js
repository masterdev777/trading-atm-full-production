import{u as X,r as l,a as z,j as t,h as q,i as J,k as Q,A as Z}from"./index-CSIaQKEl.js";import{T as tt}from"./TitleComponent-b_6u_W2v.js";import{H as i}from"./HomeBannerCard-BPmn2vth.js";import{h as m}from"./moment-C5S46NFB.js";/* empty css                  */import{R as A,A as et,X as M,Y as B,T as N,a as st,B as at,b as lt,c as ot,C as rt}from"./AreaChart-wnjK_LVO.js";import"./index-DcfIKM1A.js";import"./index-Chjiymov.js";const nt=a=>{let n=a,x=0;for(;n>0;)n=Math.floor(n/10),x++;return Math.max(Math.pow(10,x),10)},ft=()=>{var _;const a=X(s=>s.auth),[n,x]=l.useState(!1),[h,k]=l.useState([]),[u,p]=l.useState(!1),[e,v]=l.useState(),[c,C]=l.useState(1),[F,T]=l.useState(0),[f,S]=l.useState(1e3),[b,$]=l.useState(1e3),[V,R]=l.useState(0),[y,Y]=l.useState(0),[j,L]=l.useState(0),E=z();l.useEffect(()=>{const s=()=>{if(a.currentAnalysisAccount>=0){const G={type:a.accounts[a.currentAnalysisAccount].type,account_id:a.accounts[a.currentAnalysisAccount].account_id,role:a.accounts[a.currentAnalysisAccount].role,days:c},U=q(G);J({encrypted:U}).then(W=>{const o=Q(W.encrypted);if(v(o.data),k(o.pl),Y(o.total_pl),L(o.trade_count),typeof o.minVal=="number"&&typeof o.maxVal=="number"){const r=nt(o.maxVal);T(0),S(r)}if(typeof o.plMinVal=="number"&&typeof o.plMaxVal=="number"){const r=Math.max(Math.abs(o.plMinVal),Math.abs(o.plMaxVal)),D=r>=1e3?Math.floor(-r/1e3)*1e3:Math.floor(-r),O=r>=1e3?r%1e3===0?r:(Math.floor(r/1e3)+1)*1e3:Math.floor(r);R(D),$(O)}x(!0),setTimeout(()=>{x(!1)},2e3)})}};s();const d=setInterval(s,1e4);return()=>clearInterval(d)},[u]);const H=s=>{E({type:Z.AUTH_USER,payload:{currentAnalysisAccount:parseInt(s.target.value)}}),p(!u)},I=s=>{C(parseInt(s.target.value)),p(!u)},w=s=>s.active&&s.payload&&s.payload.length?t.jsxs("div",{className:"p-3 custom-tooltip bg-black rounded-lg",children:[t.jsx("p",{className:"text-[#B8B8B8] font-bold text-[15px] text-right",children:m(s.label).format("D MMMM YYYY")}),c===1&&t.jsx("p",{className:"text-[#B8B8B8] font-bold text-sm text-right",children:m(s.label).format("hh:mm A")}),t.jsxs("p",{className:"balance pt-2 text-white text-right font-bold",children:["$ ",s.payload[0].value.toFixed(2)]})]}):null,g=s=>c!==1?`${m(s).format("D MMM")}`:`${m(s).format("DD, HH A")}`,K=s=>f>=1e3?`${(s/1e3).toFixed(1)}k`:`${s.toFixed(0)}`,P=s=>b>=1e3?`${(s/1e3).toFixed(1)}k`:`${s.toFixed(0)}`;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"my-10 w-full h-auto flex flex-col justify-center gap-4",children:[t.jsx(tt,{title:"Trading Analysis"}),t.jsxs("div",{className:"mt-8 w-full flex justify-between",children:[t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("label",{className:"hidden md:block font-semibold text-white",children:"Account Name:"}),t.jsx("div",{className:"account-styled-select",children:t.jsx("select",{value:a.currentAnalysisAccount,onChange:H,children:((_=a.accounts)==null?void 0:_.length)>0?a.accounts.map((s,d)=>t.jsx("option",{value:d,children:s.account_name},d)):t.jsx("option",{children:"No Account"})})})]}),t.jsx("div",{className:"day-styled-select",children:t.jsxs("select",{onChange:I,children:[t.jsx("option",{value:"1",children:"Daily"}),t.jsx("option",{value:"7",children:"Weekly"}),t.jsx("option",{value:"30",children:"Monthly"})]})})]}),t.jsxs("div",{className:"trading-analysis-select-card w-full",children:[t.jsx(i,{text:"Account Type",title:(e==null?void 0:e.type)==="tll"?"TL - Live":(e==null?void 0:e.type)==="tld"?"TL - Demo":(e==null?void 0:e.type)==="mt4"?"MT4":(e==null?void 0:e.type)==="mt5"?"MT5":"",background_left_img:"home-banner-card1-left.webp",background_right_img:"home-banner-card1-right.webp",className:"w-full h-[130px]",className1:"text-white"}),t.jsx(i,{text:"Account Role",title:e==null?void 0:e.role,background_left_img:"home-banner-card2-left.webp",background_right_img:"home-banner-card2-right.webp",className:"w-full h-[130px]",className1:"text-white"}),t.jsx(i,{text:"Register Date",title:e?m(e==null?void 0:e.registered_at).format("YY/MM/DD"):"",background_left_img:"home-banner-card3-left.webp",background_right_img:"home-banner-card3-right.webp",className:"w-full h-[130px]",className1:"text-white"})]}),t.jsx("div",{className:"mt-10 w-full h-[400px] lg:flex-row items-center justify-between",children:t.jsxs("div",{className:`backdrop-blur-xl h-full border-[2px] border-color4 rounded-xl 
          flex flex-col py-8`,children:[t.jsx("h2",{className:"mb-8 pl-8 text-white text-2xl font-bold",children:"Ballance Chart"}),t.jsx(A,{width:"100%",height:"80%",children:t.jsxs(et,{width:500,height:300,data:h,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"fillGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#907DFF",stopOpacity:.29}),t.jsx("stop",{offset:"100%",stopColor:"#D6D6D6",stopOpacity:0})]})}),t.jsx(M,{dataKey:"date",tickFormatter:g,interval:c===1?4:c===7?0:5,tick:{fill:"#B8B8B8"}}),t.jsx(B,{tick:{fill:"#B8B8B8"},tickFormatter:K,domain:[F,f]}),t.jsx(N,{content:t.jsx(w,{})}),t.jsx(st,{type:"monotone",dataKey:"balance",stroke:"#D205B3",fill:"url(#fillGradient)",dot:!1})]})})]})}),t.jsx("div",{className:"my-10 w-full h-[400px] lg:flex-row items-center justify-between",children:t.jsxs("div",{className:`backdrop-blur-xl h-full border-[2px] border-color4 rounded-xl 
          flex flex-col py-8`,children:[t.jsx("h2",{className:"mb-8 pl-8 text-white text-2xl font-bold",children:"Profit & Loss (PnL)"}),t.jsx(A,{width:"100%",height:"80%",children:t.jsxs(at,{width:500,height:300,data:h,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(M,{dataKey:"date",tickFormatter:g,interval:c===1?4:c===7?0:5,tick:{fill:"#B8B8B8"}}),t.jsx(B,{tick:{fill:"#B8B8B8"},tickFormatter:P,domain:[V,b]}),t.jsx(N,{content:t.jsx(w,{}),cursor:{fill:"#907DFF29"}}),t.jsx(lt,{y:0,stroke:"#B8B8B8"}),t.jsx(ot,{dataKey:"pl",maxBarSize:40,children:h==null?void 0:h.map((s,d)=>t.jsx(rt,{fill:s.pl>0?"#39DC01":"#E2293B",stroke:s.pl>0?"#39DC01":"#E2293B"},`Cell-${d}`))})]})})]})}),t.jsxs("div",{className:"trading-analysis-bottom w-full flex items-center justify-between",children:[t.jsx(i,{text:"Account Balance ($)",title:e!=null&&e.account_balance?e==null?void 0:e.account_balance.toFixed(2):"0",background_left_img:"home-banner-card1-left.webp",background_right_img:"home-banner-card1-right.webp",className:"w-full h-[130px]",className1:`${n?"text-color2":"text-white"}`}),t.jsx(i,{text:"Win Rate (%)",title:e&&(e==null?void 0:e.win_count)+(e==null?void 0:e.lose_count)>0?((e==null?void 0:e.win_count)/((e==null?void 0:e.win_count)+(e==null?void 0:e.lose_count))*100).toFixed(2)+" %":"0 %",background_left_img:"home-banner-card2-left.webp",background_right_img:"home-banner-card2-right.webp",className:"w-full h-[130px]",className1:`${n?"text-color2":"text-white"}`}),t.jsx(i,{text:"Total P/L ($)",title:y?y.toFixed(2):"0",background_left_img:"home-banner-card3-left.webp",background_right_img:"home-banner-card3-right.webp",className:"w-full h-[130px]",className1:`${n?"text-color2":"text-white"}`}),t.jsx(i,{text:"Trade Counts",title:j?j.toString():"0",background_left_img:"home-banner-card4-left.webp",background_right_img:"home-banner-card4-right.webp",className:"w-full h-[130px]",className1:`${n?"text-color2":"text-white"}`})]})]})})};export{ft as default};
