import{k as E,u as P,a as $,b as M,r as d,j as a,B as Y,i as w,t as o}from"./index-C5dHWHVl.js";import{w as R,x as G,y as A,z as I,A as W,B as z}from"./DashboardActions-C9q7Oh-I.js";import{S as K}from"./SettingCard-CImHKM0Z.js";import{I as O,a as q}from"./IntegrationUploadImage-C13xmlOl.js";import{i as H}from"./Functions-COzV2hZz.js";import{B as J}from"./ButtonComponentWhite-Dt3BG52z.js";import{D as v,U as Q}from"./uploading-Qqmo6sSF.js";import{l as V}from"./stack-BlqWHnTg.js";const ie=({role:r})=>{const[j,X]=E(),u=P(s=>s.auth),n=$(),m=M(),[C,x]=d.useState(!1),[e,k]=d.useState({acc_name:"",acc_password:"",acc_id:"",acc_email:"",server_name:""}),[l,S]=d.useState(0),[b,F]=d.useState({per_hour:"0"}),[N,B]=d.useState(""),[f,L]=d.useState(v),[T,y]=d.useState(1);d.useEffect(()=>{const s=j.get("level_index"),c=j.get("type");s&&(s!=="0"&&s!=="1"&&s!=="2"&&s!=="3"&&m("/dashboard/integrations/home"),S(parseInt(s))),c==="demo"&&y(0),c==="live"&&y(1)},[]);const U=async()=>{const s={email:e.acc_email.trim(),password:e.acc_password,server:e.server_name.trim()};x(!0),T===0?await R(s).then(async c=>{await G(c.accessToken).then(async i=>{let g=!1,h=0,p=0;for(let t=0;t<i.length;t++)if(i[t].id===e.acc_id){g=!0,h=parseInt(i[t].accNum),p=parseFloat(i[t].accountBalance);break}g?r==="master"?await n(A({acc_num:h,account_balance:p,access_token:c.accessToken,refresh_token:c.refreshToken,acc_email:e.acc_email,acc_id:e.acc_id,acc_password:e.acc_password,server_name:e.server_name,acc_name:e.acc_name,type:"tld",id:u.user.id,profit_share:b,description:N,avatar:f===v?"":f,index_level:l})).then(async t=>{await n(w()),t.status===200?o.success("Master Account Added Successfully!"):t.status===201&&o.warning(t.data),m("/dashboard/masters")}):r==="copier"&&await n(I({acc_num:h,account_balance:p,access_token:c.accessToken,refresh_token:c.refreshToken,acc_email:e.acc_email,acc_id:e.acc_id,acc_password:e.acc_password,server_name:e.server_name,acc_name:e.acc_name,type:"tld",id:u.user.id,avatar:u.user.avatar})).then(async t=>{await n(w()),t.status===200?o.success("Copier Account Added Successfully!"):t.status===201&&o.warning(t.data),m("/dashboard/copiers")}):o.warning("No account exist!"),x(!1)})}).catch(()=>{o.error("No this account exists!"),x(!1)}):T===1&&await W(s).then(async c=>{await z(c.accessToken).then(async i=>{let g=!1,h=0,p=0;for(let t=0;t<i.length;t++)if(i[t].id===e.acc_id){p=parseInt(i[t].accNum),h=parseFloat(i[t].accountBalance),g=!0;break}g?r==="master"?await n(A({acc_num:p,account_balance:h,access_token:c.accessToken,refresh_token:c.refreshToken,acc_email:e.acc_email,acc_id:e.acc_id,acc_password:e.acc_password,server_name:e.server_name,acc_name:e.acc_name,type:"tll",id:u.user.id,profit_share:b,description:N,avatar:f===v?"":f,index_level:l})).then(async()=>{await n(w()),o.success("Master Account Added Successfully!"),m("/dashboard/masters")}):r==="copier"&&await n(I({acc_num:p,acc_email:e.acc_email,acc_id:e.acc_id,acc_password:e.acc_password,server_name:e.server_name,acc_name:e.acc_name,type:"tll",id:u.user.id,avatar:u.user.avatar})).then(async()=>{await n(w()),o.success("Copier Account Added Successfully!"),m("/dashboard/copiers")}):o.warning("No account exist!"),x(!1)})}).catch(()=>{o.error("No this account exists!"),x(!1)})},_=(s,c)=>{s==="acc_password"?k({...e,[s]:c}):H(c)&&k({...e,[s]:c})},D=()=>{r==="master"&&m(`/dashboard/integrations/masters/selectplatform?index=${l}`),r==="copier"&&m("/dashboard/integrations/copiers/selectplatform")};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"mt-16",children:a.jsxs("div",{className:"relative w-full h-auto rounded-xl rounded-tl-[30px] border-2 border-color4 bg-gradient-to-br from-[#FFFFFF03] to-[#FFFFFF01]",children:[a.jsx("img",{src:"/icons/tradelocker-left.webp",alt:"Tradelocker icon",title:"This is left icon",className:"absolute top-0 left-0 w-[100px] h-[100px]"}),a.jsx("img",{src:"/icons/top-right.webp",alt:"Top right icon",title:"This is general icon",className:"absolute top-[18px] right-[18px] w-[67px] h-[67px]"}),a.jsx("img",{src:"/icons/bottom-right.webp",alt:"Bottom right icon",title:"This is general icon",className:"absolute bottom-[18px] right-[18px] w-[67px] h-[67px]"}),a.jsx("img",{src:"/icons/bottom-left.webp",alt:"Bottom left icon",title:"This is general icon",className:"absolute bottom-[18px] left-[18px] w-[67px] h-[67px]"}),a.jsx("div",{className:"my-16 flex items-center justify-center",children:C?a.jsx(O,{}):a.jsxs("div",{className:"w-[80%] flex flex-col items-center justify-center",children:[a.jsxs("div",{className:"w-full flex items-center gap-5",children:[a.jsxs("h2",{className:"hidden md:block text-[32px] text-white",children:["Tradelocker ",r==="master"?"Master":"Copier"]}),a.jsx("h2",{className:"block md:hidden text-[32px] text-white",children:"Tradelocker"}),r==="master"&&l?a.jsx("img",{src:V[l],alt:"Level icon",title:"This is icon to show account level",className:"h-[28px]"}):a.jsx(a.Fragment,{})]}),a.jsx("div",{className:"mt-8 w-full font-bold text-xl text-white",children:"Basic information :"}),a.jsxs("div",{className:"my-8 w-full flex-col flex lg:flex-row lg:justify-between gap-6 lg:gap-0",children:[a.jsx("div",{className:`${r==="copier"&&"hidden"} w-[130px] h-[130px] rounded-full border-4 ${l===3?"border-herocolor":l===2?"border-goldcolor":l===1?"border-silvercolor":"border-color4"}`,children:a.jsx(q,{avatarURL:f,setAvatarURL:L,DefaultImage:v,UploadingAnimation:Q,className:"w-[122px] h-[122px]",className1:"bottom-12 right-[68px]",className2:"bottom-12 right-[32px]"})}),a.jsxs("div",{className:`${r==="master"?"integration-input-group":"w-full"} grid grid-cols-1 md:grid-cols-2 gap-4`,children:[a.jsx("input",{type:"email",value:e.acc_email,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Account Email",onChange:s=>_("acc_email",s.target.value)}),a.jsx("input",{value:e.acc_id,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Account Id",onChange:s=>_("acc_id",s.target.value)}),a.jsx("input",{type:"password",value:e.acc_password,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Account Password",onChange:s=>_("acc_password",s.target.value)}),a.jsx("input",{value:e.server_name,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Server Name",onChange:s=>_("server_name",s.target.value)}),a.jsx("input",{value:e.acc_name,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Account Name (Displayed on this platform)",onChange:s=>_("acc_name",s.target.value)})]})]}),a.jsx("div",{className:`w-full ${r==="copier"&&"hidden"}`,children:a.jsx(K,{profit:b,setProfit:F,description:N,setDescription:B})}),a.jsxs("div",{className:"mt-6 w-full flex justify-end gap-5",children:[a.jsx(J,{text:"GO BACK",className:"w-full sm:w-[216px] h-[56px]",handleClick:D}),a.jsx(Y,{text:"+ ADD",className:"w-full sm:w-[216px] h-[56px]",handleClick:U})]})]})})]})})})};export{ie as T};
