import{u as O,r as s,a as W,j as t,i as X,A as z}from"./index-D3mr-EkT.js";import{T as D}from"./TitleComponent-1N1_GeoH.js";import{H as i}from"./HomeBannerCard-6VGCpLYX.js";import{h as m}from"./moment-C5S46NFB.js";/* empty css                  */import{R as y,A as q,X as _,Y as M,T as A,a as J,B as Q,b as Z,c as tt,C as et}from"./AreaChart-B8PU6kXx.js";import"./index-DcfIKM1A.js";import"./index-Chjiymov.js";const at=l=>{let c=l,x=0;for(;c>0;)c=Math.floor(c/10),x++;return Math.max(Math.pow(10,x),10)},xt=()=>{var w;const l=O(a=>a.auth),[c,x]=s.useState(!1),[h,B]=s.useState([]),[u,f]=s.useState(!1),[e,N]=s.useState(),[n,k]=s.useState(1),[v,C]=s.useState(0),[p,F]=s.useState(1e3),[b,T]=s.useState(1e3),[S,$]=s.useState(0),[V,R]=s.useState(0),[Y,L]=s.useState(0),E=W();s.useEffect(()=>{const a=()=>{l.currentAnalysisAccount>=0&&X(l.accounts[l.currentAnalysisAccount].type,l.accounts[l.currentAnalysisAccount].account_id,l.accounts[l.currentAnalysisAccount].role,n).then(o=>{if(N(o.data),B(o.pl),R(o.total_pl),L(o.trade_count),typeof o.minVal=="number"&&typeof o.maxVal=="number"){const r=at(o.maxVal);C(0),F(r)}if(typeof o.plMinVal=="number"&&typeof o.plMaxVal=="number"){const r=Math.max(Math.abs(o.plMinVal),Math.abs(o.plMaxVal)),K=r>=1e3?Math.floor(-r/1e3)*1e3:Math.floor(-r),U=r>=1e3?r%1e3===0?r:(Math.floor(r/1e3)+1)*1e3:Math.floor(r);$(K),T(U)}x(!0),setTimeout(()=>{x(!1)},2e3)})};a();const d=setInterval(a,1e4);return()=>clearInterval(d)},[u]);const H=a=>{E({type:z.AUTH_USER,payload:{currentAnalysisAccount:parseInt(a.target.value)}}),f(!u)},I=a=>{k(parseInt(a.target.value)),f(!u)},j=a=>a.active&&a.payload&&a.payload.length?t.jsxs("div",{className:"p-3 custom-tooltip bg-black rounded-lg",children:[t.jsx("p",{className:"text-[#B8B8B8] font-bold text-[15px] text-right",children:m(a.label).format("D MMMM YYYY")}),n===1&&t.jsx("p",{className:"text-[#B8B8B8] font-bold text-sm text-right",children:m(a.label).format("hh:mm A")}),t.jsxs("p",{className:"balance pt-2 text-white text-right font-bold",children:["$ ",a.payload[0].value.toFixed(2)]})]}):null,g=a=>n!==1?`${m(a).format("D MMM")}`:`${m(a).format("DD, HH A")}`,P=a=>p>=1e3?`${(a/1e3).toFixed(1)}k`:`${a.toFixed(0)}`,G=a=>b>=1e3?`${(a/1e3).toFixed(1)}k`:`${a.toFixed(0)}`;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"my-10 w-full h-auto flex flex-col justify-center gap-4",children:[t.jsx(D,{title:"Trading Analysis"}),t.jsxs("div",{className:"mt-8 w-full flex justify-between",children:[t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("label",{className:"hidden md:block font-semibold text-white",children:"Account Name:"}),t.jsx("div",{className:"account-styled-select",children:t.jsx("select",{value:l.currentAnalysisAccount,onChange:H,children:((w=l.accounts)==null?void 0:w.length)>0&&l.accounts.map((a,d)=>t.jsx("option",{value:d,children:a.account_name},d))})})]}),t.jsx("div",{className:"day-styled-select",children:t.jsxs("select",{onChange:I,children:[t.jsx("option",{value:"1",children:"Daily"}),t.jsx("option",{value:"7",children:"Weekly"}),t.jsx("option",{value:"30",children:"Monthly"})]})})]}),t.jsxs("div",{className:"trading-analysis-select-card w-full",children:[t.jsx(i,{text:"Account Type",title:(e==null?void 0:e.type)==="tll"?"TL - Live":(e==null?void 0:e.type)==="tld"?"TL - Demo":(e==null?void 0:e.type)==="mt4"?"MT4":(e==null?void 0:e.type)==="mt5"?"MT5":"",background_left_img:"home-banner-card1-left.webp",background_right_img:"home-banner-card1-right.webp",className:"w-full h-[130px]",className1:"text-white"}),t.jsx(i,{text:"Account Role",title:e==null?void 0:e.role,background_left_img:"home-banner-card2-left.webp",background_right_img:"home-banner-card2-right.webp",className:"w-full h-[130px]",className1:"text-white"}),t.jsx(i,{text:"Register Date",title:e?m(e==null?void 0:e.registered_at).format("YY/MM/DD"):"",background_left_img:"home-banner-card3-left.webp",background_right_img:"home-banner-card3-right.webp",className:"w-full h-[130px]",className1:"text-white"})]}),t.jsx("div",{className:"mt-10 w-full h-[400px] lg:flex-row items-center justify-between",children:t.jsxs("div",{className:`backdrop-blur-xl h-full border-[2px] border-color4 rounded-xl 
          flex flex-col py-8`,children:[t.jsx("h2",{className:"mb-8 pl-8 text-white text-2xl font-bold",children:"Ballance Chart"}),t.jsx(y,{width:"100%",height:"80%",children:t.jsxs(q,{width:500,height:300,data:h,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"fillGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#907DFF",stopOpacity:.29}),t.jsx("stop",{offset:"100%",stopColor:"#D6D6D6",stopOpacity:0})]})}),t.jsx(_,{dataKey:"date",tickFormatter:g,interval:n===1?4:n===7?0:5,tick:{fill:"#B8B8B8"}}),t.jsx(M,{tick:{fill:"#B8B8B8"},tickFormatter:P,domain:[v,p]}),t.jsx(A,{content:t.jsx(j,{})}),t.jsx(J,{type:"monotone",dataKey:"balance",stroke:"#D205B3",fill:"url(#fillGradient)",dot:!1})]})})]})}),t.jsx("div",{className:"my-10 w-full h-[400px] lg:flex-row items-center justify-between",children:t.jsxs("div",{className:`backdrop-blur-xl h-full border-[2px] border-color4 rounded-xl 
          flex flex-col py-8`,children:[t.jsx("h2",{className:"mb-8 pl-8 text-white text-2xl font-bold",children:"Profit & Loss (PnL)"}),t.jsx(y,{width:"100%",height:"80%",children:t.jsxs(Q,{width:500,height:300,data:h,margin:{top:5,right:30,left:20,bottom:5},children:[t.jsx(_,{dataKey:"date",tickFormatter:g,interval:n===1?4:n===7?0:5,tick:{fill:"#B8B8B8"}}),t.jsx(M,{tick:{fill:"#B8B8B8"},tickFormatter:G,domain:[S,b]}),t.jsx(A,{content:t.jsx(j,{}),cursor:{fill:"#907DFF29"}}),t.jsx(Z,{y:0,stroke:"#B8B8B8"}),t.jsx(tt,{dataKey:"pl",maxBarSize:40,children:h==null?void 0:h.map((a,d)=>t.jsx(et,{fill:a.pl>0?"#39DC01":"#E2293B",stroke:a.pl>0?"#39DC01":"#E2293B"},`Cell-${d}`))})]})})]})}),t.jsxs("div",{className:"trading-analysis-bottom w-full flex items-center justify-between",children:[t.jsx(i,{text:"Account Balance ($)",title:e==null?void 0:e.account_balance.toFixed(2),background_left_img:"home-banner-card1-left.webp",background_right_img:"home-banner-card1-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`}),t.jsx(i,{text:"Win Rate (%)",title:e?(e==null?void 0:e.win_count)+(e==null?void 0:e.lose_count)>0?((e==null?void 0:e.win_count)/((e==null?void 0:e.win_count)+(e==null?void 0:e.lose_count))*100).toFixed(2)+" %":"0 %":"",background_left_img:"home-banner-card2-left.webp",background_right_img:"home-banner-card2-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`}),t.jsx(i,{text:"Total P/L ($)",title:V.toFixed(2),background_left_img:"home-banner-card3-left.webp",background_right_img:"home-banner-card3-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`}),t.jsx(i,{text:"Trade Counts",title:Y.toString(),background_left_img:"home-banner-card4-left.webp",background_right_img:"home-banner-card4-right.webp",className:"w-full h-[130px]",className1:`${c?"text-color2":"text-white"}`})]})]})})};export{xt as default};
