import{j as e,u as U,m as z,r as t,b as G,a as P,B as K,e as I,k as B,h as H,t as E}from"./index-CndeRajg.js";import{c as J,e as Q}from"./DashboardActions-BP3iLw6C.js";import{B as V}from"./ButtonComponentWhite-DR9ggAwR.js";import{T as X}from"./TitleComponent-Jlb1nLkV.js";import{D as Z}from"./DataLoading-HS_aWWOY.js";import{C as ee}from"./CustomPagination-DjeyQcVn.js";import{C as se}from"./CheckBoxComponent-BkFEmsDQ.js";import{l as g}from"./stack-DOGBLlDl.js";import{h as te}from"./moment-C5S46NFB.js";/* empty css                *//* empty css                  */const ae=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-6 master-accounts-column",children:e.jsxs("div",{className:"master-accounts-item h-[40px] flex text-base text-color5 border-b-2 border-color4",children:[e.jsx("div",{className:"basis-[23%] flex justify-end",children:"ACCOUNT NAME"}),e.jsx("div",{className:"basis-[12%] flex justify-end",children:"PnL ($)"}),e.jsx("div",{className:"basis-[8%] flex justify-end",children:"WIN RATE"}),e.jsx("div",{className:"pl-8 basis-[13%] flex justify-start",children:"TYPE"}),e.jsx("div",{className:"basis-[14%] flex justify-end",children:"REGISTER DATE"}),e.jsx("div",{className:"basis-[8%] flex justify-end",children:"FOLLOWS"}),e.jsx("div",{className:"basis-[12%] flex justify-end",children:"PROFIT SHARE"}),e.jsx("div",{className:"pr-2 basis-[10%] flex justify-center",children:"ACTION"})]})})}),le=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-[320px] bg-transparent flex items-center justify-center",children:e.jsxs("div",{role:"status",className:"flex flex-col items-center gap-5",children:[e.jsx("img",{src:"/icons/preloader.gif",className:"size-[100px]",alt:"Website preloader",title:"This is loading animation"}),e.jsx("span",{className:"text-2xl font-bold text-color5",children:"Connecting to master..."})]})})}),ce=({isDataLoading:x,data:c,setMasterData:y,setSelectedAccId:p,setMasterType:_,isConnecting:T,currentPage:o,setCurrentPage:i,displayCount:u,setDisplayCount:C,totalCount:v})=>{const d=U(s=>s.auth),h=(s,a)=>{const n=c.map((r,j)=>s===j?(p(r.account_id),_(a),{...r,action:!0}):{...r,action:!1});y(n)},m=s=>{const a=parseInt(s.target.value);C(a),i(0)},D=()=>{i(o===0?0:o-1)},f=()=>{(o+1)*u>=v?i(o):i(o+1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"master-accounts-box customized-scrollbar-x overflow-x-auto mx-auto",children:[e.jsx(ae,{}),e.jsx("div",{className:`master-accounts-data mx-auto flex flex-col ${!(c!=null&&c.length)&&"items-center justify-center"}`,children:x?e.jsx(Z,{}):T?e.jsx(le,{}):(c==null?void 0:c.length)>0?c.map((s,a)=>{var n,r;return e.jsxs("div",{className:"master-accounts-item h-[80px] flex items-center border-b-color4 border-b-2",children:[e.jsx("div",{className:"h-[80px] basis-[8%] flex justify-end items-center",children:e.jsxs("div",{className:`relative w-[64px] h-[64px] rounded-full border-2 
                        ${s.level==="hero"?"border-herocolor":s.level==="gold"?"border-goldcolor":s.level==="silver"?"border-silvercolor":"border-color5"}`,children:[s.avatar?e.jsx("img",{src:s.avatar,alt:"Master Account Avatar",title:"This is avatar of trading account",className:"w-[60px] h-[60px] rounded-full"}):e.jsx("img",{src:"/icons/user-icon.webp",alt:"User icon",title:"This is default icon",className:"w-[60px] h-[60px] rounded-full"}),e.jsx("img",{src:s.level==="hero"?g[3]:s.level==="gold"?g[2]:s.level==="silver"?g[1]:g[0],alt:"Plan avatar",title:"This is to show level",className:`${(s.level==="basic"||!s.level)&&"hidden"} absolute bottom-[-2px] right-[-3px]  w-[20px] h-[20px]`})]})}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[90%] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s.account_name})}),e.jsx("div",{className:`h-[80px] basis-[12%] flex justify-end items-center ${(s==null?void 0:s.total_pl_amount)>0?"text-positivecolor":"text-color2"} text-base`,children:"$ "+(s!=null&&s.total_pl_amount?s==null?void 0:s.total_pl_amount.toFixed(2):0)}),e.jsx("div",{className:`h-[80px] basis-[8%] flex justify-end items-center text-base
                        ${s.win_count+s.lose_count>0&&s.win_count/(s.win_count+s.lose_count)*100>=50?"text-positivecolor":"text-color2"}`,children:s.win_count+s.lose_count>0?(s.win_count/(s.win_count+s.lose_count)*100).toFixed(2)+" %":"0 %"}),e.jsxs("div",{className:"pl-8 h-[80px] basis-[13%] flex justify-start items-center text-white text-base",children:[s.type==="mt4"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader4-square.webp",alt:"Metatrader4 square icon",title:"This is icon to show metatrader4",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 4"})]}),s.type==="mt5"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader5-square.webp",alt:"Metatrader5 square icon",title:"This is icon to show metatrader5",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 5"})]}),s.type==="tll"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",alt:"Tradelocker square icon",title:"This is icon to show tradelocker",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - Li"})]}),s.type==="tld"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",alt:"Tradelocker square icon",title:"This is icon to show tradelocker",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - De"})]})]}),e.jsx("div",{className:"h-[80px] basis-[14%] flex justify-end items-center text-white text-base",children:te(s.registered_at).format("YYYY/MM/DD")}),e.jsxs("div",{className:"h-[80px] basis-[8%] flex justify-end items-center text-white text-base",children:[s.follows+"/",s.level==="hero"?"âˆž":s.level==="gold"?d.levelToLimit[2].limit_value:s.level==="silver"?d.levelToLimit[1].limit_value:d.levelToLimit[0].limit_value]}),e.jsx("div",{className:"h-[80px] basis-[12%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"w-full flex flex-col gap-1 items-end",children:e.jsxs("p",{className:"text-white",children:["$ ",(n=s.profit_share)!=null&&n.per_hour?(r=s.profit_share)==null?void 0:r.per_hour:"0"," / hour"]})})}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-center items-center text-white",children:e.jsx(se,{value:s.action,handleChange:()=>h(a,s.type)})})]},a)}):e.jsx("p",{className:"text-2xl text-white font-bold",children:"No account has been added."})})]}),e.jsxs("div",{className:"master-accounts-box mx-auto relative mt-8 w-full flex flex-col gap-5 items-center lg:flex-row lg:justify-start 2xl:justify-center",children:[e.jsx(ee,{currentPage:o,totalPageNum:Math.floor((v-1)/u),handleClickPrevButton:D,handleClickNextButton:f,setCurrentPage:i}),e.jsxs("div",{className:"flex lg:absolute lg:right-0 items-center gap-2",children:[e.jsx("label",{className:"text-white text-base",children:"Display:"}),e.jsx("div",{className:"display-styled-select",children:e.jsxs("select",{value:u,onChange:m,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})})]})]})]})},be=()=>{const[x,c]=z(),[y,p]=t.useState([]),[_,T]=t.useState(""),[o,i]=t.useState("new"),[u,C]=t.useState(""),[v,d]=t.useState(""),[h,m]=t.useState(""),[D,f]=t.useState(!1),[s,a]=t.useState(!1),[n,r]=t.useState(0),[j,q]=t.useState(5),[F,$]=t.useState(0),L=G(),S=P();t.useEffect(()=>{const A=x.get("account_id");A&&T(A);const b=x.get("account_type");b&&C(b);const N=x.get("action");N&&i(N);const k=x.get("my_master");(async()=>{f(!0);const Y=I({acc_type:0,current_page:n,display_count:j});await S(J({encrypted:Y})).then(W=>{const w=B(W.encrypted);if(w.totalCount&&$(w.totalCount),h){const M=w.accounts.map(l=>h===l.account_id?(m(l.account_id),{...l,action:!0}):{...l,action:!1});p(M)}else{const M=w.accounts.map(l=>k===l.account_id?(m(l.account_id),d(l.type),{...l,action:!0}):{...l,action:!1});p(M)}f(!1)}).catch(()=>{f(!1)})})()},[j,n]);const O=()=>{L("/dashboard/copiers")},R=async()=>{if(a(!0),h){const b=I({copier_acc_id:_,copier_type:u,master_acc_id:h,master_type:v,action_type:o});await S(Q({encrypted:b})).then(async N=>{const k=B(N.encrypted);await S(H()),E.success(k.message),L("/dashboard/copiers"),a(!1)}).catch(()=>{a(!1)})}else E.warning("Please select your master!"),a(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(X,{title:"Copiers"})}),e.jsxs("div",{className:"w-full flex flex-col sm:flex-row justify-between gap-4 md:gap-0",children:[e.jsx(V,{text:"GO BACK",className:"w-full sm:w-[180px] md:w-[216px] h-[56px]",handleClick:O}),e.jsx(K,{text:"CONNECT",className:"w-full sm:w-[180px] md:w-[216px] h-[56px]",handleClick:R})]}),e.jsxs("div",{className:"relative w-full justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",alt:"Top left icon",title:"This is general icon",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",alt:"Top right icon",title:"This is general icon",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",alt:"Bottom left icon",title:"This is general icon",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",alt:"Bottom right icon",title:"This is general icon",className:"absolute bottom-4 right-4"}),e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto overflow-auto",children:e.jsx("h3",{className:"customized-scrollbar-x w-[140px] text-base text-white",children:"Select Your Master"})}),e.jsx(ce,{setMasterType:d,isDataLoading:D,isConnecting:s,data:y,setMasterData:p,setSelectedAccId:m,currentPage:n,setCurrentPage:r,displayCount:j,setDisplayCount:q,totalCount:F})]})]})]})})};export{be as default};
