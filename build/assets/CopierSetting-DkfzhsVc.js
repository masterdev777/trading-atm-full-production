import{b as O,a as U,r as a,j as e,B as W,t as E,g as X}from"./index-C-wVKE08.js";import{T as Z}from"./TitleComponent-hK5-nhUI.js";import{B as K}from"./ButtonComponentWhite-CNd9_3CR.js";import{u as D,f as ee,h as se,i as te}from"./DashboardActions-TGnx1ONk.js";import{D as Q}from"./DashboardLoading-CpgiZrQx.js";import{M as le}from"./MainDataLoading-bMndU-B_.js";/* empty css                  */const ae=({account_id:N,type:R,copierData:s,setCopierData:b})=>{const C=O(),w=U(),[z,x]=a.useState(!1),[o,t]=a.useState("fixed_lot"),[d,m]=a.useState({fixed_lot:0,lot_multiplier:100,balance_multiplier:0,fixed_balance_multiplier:1e5}),[f,h]=a.useState(1),[v,y]=a.useState(1),[g,j]=a.useState("0"),[_,p]=a.useState("0"),[S,T]=a.useState(1),[k,V]=a.useState("0");a.useEffect(()=>{var n,u,c,F,L,M,I,$,A,H,q,J;s.risk_type&&t(s.risk_type),s.risk_type&&s.risk_setting&&m({...d,[s.risk_type]:s.risk_setting}),s.force_min_max&&(((n=s.force_min_max)==null?void 0:n.force_max)!==null&&h((u=s.force_min_max)!=null&&u.force_max?0:1),((c=s.force_min_max)==null?void 0:c.force_min)!==null&&y((F=s.force_min_max)!=null&&F.force_min?0:1),(L=s.force_min_max)!=null&&L.force_max_value&&j((M=s.force_min_max)==null?void 0:M.force_max_value),(I=s.force_min_max)!=null&&I.force_min_value&&p(($=s.force_min_max)==null?void 0:$.force_min_value),(A=s.force_min_max)!=null&&A.lot_refine&&T((H=s.force_min_max)!=null&&H.lot_refine?0:1),(q=s.force_min_max)!=null&&q.lot_refine_size&&V((J=s.force_min_max)==null?void 0:J.lot_refine_size))},[]);const Y=n=>{t(n.target.value)},G=n=>{const c=n.target.value.replace(/[^0-9]/g,"");m(c===""?{...d,[o]:0}:{...d,[o]:parseInt(c)})},l=async()=>{const n={accountId:N,accountType:R,riskType:o,riskSetting:o==="fixed_lot"?d.fixed_lot:o==="lot_multiplier"?d.lot_multiplier:o==="balance_multiplier"?d.balance_multiplier:d.fixed_balance_multiplier,isForceMax:f===0,isForceMin:v===0,forceMaxValue:g,forceMinValue:_,isLotRefine:S===0,lotRefineSize:k===""?"0":k};x(!0),await w(D(n)).then(u=>{E.success("Updated successfully!"),b(u),x(!1)}).catch(()=>{x(!1)})},r=()=>{C("/dashboard/copiers")},i=n=>{const c=n.target.value.replace(/(\..*?)\..*/g,"$1");j(c===""?"0":c)},P=n=>{const c=n.target.value.replace(/(\..*?)\..*/g,"$1");p(c===""?"0":c)},B=n=>{const u=n.target.value;let c;if(u.startsWith("-")?c="-"+u.replace(/[^0-9.]/g,""):c=u.replace(/[^0-9.]/g,""),(c.match(/\./g)||[]).length>1){const L=c.lastIndexOf(".");c=c.slice(0,L)}V(c===""?"":c)};return e.jsx(e.Fragment,{children:z?e.jsx(Q,{}):e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 my-12 w-full flex flex-col gap-8",children:[e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 md:gap-x-6 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Risk Type"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:Y,value:o,children:[e.jsx("option",{value:"fixed_lot",children:"Fixed Lot"}),e.jsx("option",{value:"lot_multiplier",children:"Lot Multiplier"}),e.jsx("option",{value:"balance_multiplier",children:"Balance Multiplier"}),e.jsx("option",{value:"fixed_balance_multiplier",children:"Fixed Balance Multiplier"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-color5",children:[(o==="fixed_lot"||o==="balance_multiplier")&&"Risk Setting",o==="lot_multiplier"?"Lot Percentage (%)":o==="fixed_balance_multiplier"?"Fixed Balance ($)":""]}),e.jsx("input",{disabled:o==="fixed_lot"||o==="balance_multiplier",className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${o==="fixed_lot"||o==="balance_multiplier"?"text-textdisablecolor":"text-white"}`,onChange:G,value:o==="lot_multiplier"?d.lot_multiplier:o==="fixed_balance_multiplier"?d.fixed_balance_multiplier:0})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Force Maximum Lot"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:n=>h(parseInt(n.target.value)),value:f,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Maximum Lot Size"}),e.jsx("input",{disabled:f===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${f===1?"text-textdisablecolor":"text-white"}`,value:g,onChange:i})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Force Minimum Lot"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:n=>y(parseInt(n.target.value)),value:v,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Minimum Lot Size"}),e.jsx("input",{disabled:v===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${v===1?"text-textdisablecolor":"text-white"}`,value:_,onChange:P})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Lot Refiner"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:n=>T(parseInt(n.target.value)),value:S,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Lot Refine Size"}),e.jsx("input",{disabled:S===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${S===1?"text-textdisablecolor":"text-white"}`,value:k,onChange:B})]})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-x-4 gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy From Account"}),e.jsx("input",{disabled:!0,className:"select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none text-textdisablecolor",defaultValue:s.account_name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy To Account"}),e.jsx("input",{disabled:!0,className:"select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none text-textdisablecolor",defaultValue:s.my_master_name})]})]})]}),e.jsxs("div",{className:"px-6 w-full flex flex-col md:flex-row items-center justify-end gap-4",children:[e.jsx(K,{text:"GO BACK",className:"h-[56px] w-full md:w-[184px]",handleClick:r}),e.jsx(W,{text:"UPDATE",className:"h-[56px] w-full md:w-[184px]",handleClick:l})]})]})})},oe=({account_id:N,type:R,copierData:s,tradingStatus:b,setCopierData:C})=>{const w=O(),z=U(),[x,o]=a.useState(!1),[t,d]=a.useState({copy_stop_loss:0,copy_take_profit:0,fixed_stop_loss:1,fixed_take_profit:1,stop_loss_refinement:1,take_profit_refinement:1}),[m,f]=a.useState("0"),[h,v]=a.useState("0"),[y,g]=a.useState("0"),[j,_]=a.useState("0");a.useEffect(()=>{var l,r,i,P,B,n,u,c,F,L,M,I,$,A;s.follow_tp_st&&(d({copy_stop_loss:((l=s.follow_tp_st)==null?void 0:l.stop_loss)===!0?0:1,copy_take_profit:((r=s.follow_tp_st)==null?void 0:r.take_profit)===!0?0:1,fixed_stop_loss:((i=s.follow_tp_st)==null?void 0:i.fixed_stop_loss)===!0?0:1,fixed_take_profit:((P=s.follow_tp_st)==null?void 0:P.fixed_take_profit)===!0?0:1,stop_loss_refinement:((B=s.follow_tp_st)==null?void 0:B.stop_loss_refinement)===!0?0:1,take_profit_refinement:((n=s.follow_tp_st)==null?void 0:n.take_profit_refinement)===!0?0:1}),f((u=s.follow_tp_st)!=null&&u.fixed_stop_loss_size?(c=s.follow_tp_st)==null?void 0:c.fixed_stop_loss_size:"0"),v((F=s.follow_tp_st)!=null&&F.fixed_take_profit_size?(L=s.follow_tp_st)==null?void 0:L.fixed_take_profit_size:"0"),g((M=s.follow_tp_st)!=null&&M.stop_loss_refinement_size?(I=s.follow_tp_st)==null?void 0:I.stop_loss_refinement_size:"0"),_(($=s.follow_tp_st)!=null&&$.take_profit_refinement_size?(A=s.follow_tp_st)==null?void 0:A.take_profit_refinement_size:"0"))},[]);const p=(l,r)=>{const i=parseInt(r);if(isNaN(i)){E.warning("Invalid value for parsing");return}d(P=>({...P,[l]:i}))},S=l=>{let i=l.target.value.replace(/[^0-9]/g,"");f(i===""?"":i)},T=l=>{let i=l.target.value.replace(/[^0-9]/g,"");v(i===""?"":i)},k=l=>{const r=l.target.value;let i;r.startsWith("-")?i="-"+r.replace(/[^0-9]/g,""):i=r.replace(/[^0-9]/g,""),g(i===""?"":i)},V=l=>{const r=l.target.value;let i;r.startsWith("-")?i="-"+r.replace(/[^0-9]/g,""):i=r.replace(/[^0-9]/g,""),i===""?g(""):_(i)},Y=async()=>{const l={accountId:N,accountType:R,takeProfit:t.copy_take_profit,stopLoss:t.copy_stop_loss,fixedStopLoss:t.fixed_stop_loss,fixedTakeProfit:t.fixed_take_profit,fixedStopLossSize:m===""?0:m,fixedTakeProfitSize:h===""?0:h,stopLossRefinement:t.stop_loss_refinement,takeProfitRefinement:t.take_profit_refinement,stopLossRefinementSize:y===""?"0":y,takeProfitRefinementSize:j===""?"0":j};o(!0),await z(ee(l)).then(r=>{E.success("Updated successfully!"),C(r),o(!1)}).catch(()=>{o(!1)})},G=()=>{w("/dashboard/copiers")};return e.jsx(e.Fragment,{children:x?e.jsx(Q,{}):e.jsxs("div",{children:[e.jsx("div",{className:"px-4 my-12 w-full flex flex-col gap-8",children:e.jsxs("div",{className:"w-full grid lg:grid-cols-2 gap-x-6 gap-y-10",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy Stop Loss"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:l=>p("copy_stop_loss",l.target.value),value:t.copy_stop_loss,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Copy Take Profit"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-whtie",onChange:l=>p("copy_take_profit",l.target.value),value:t.copy_take_profit,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Stop Loss"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_stop_loss===1,className:"text-whtie",onChange:l=>p("fixed_stop_loss",l.target.value),value:t.fixed_stop_loss,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Stop Loss Size (pips)"}),e.jsx("input",{disabled:t.fixed_stop_loss===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.fixed_stop_loss===1||t.copy_stop_loss===1?"text-textdisablecolor":"text-white"}`,value:m,onChange:S})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Take Profit"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_take_profit===1,className:"text-whtie",onChange:l=>p("fixed_take_profit",l.target.value),value:t.fixed_take_profit,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Fixed Take Profit Size (pips)"}),e.jsx("input",{disabled:t.fixed_take_profit===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.fixed_take_profit===1||t.copy_take_profit===1?"text-textdisablecolor":"text-white"}`,value:h,onChange:T})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Stop Loss Refinement"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_stop_loss===1,className:"text-whtie",onChange:l=>p("stop_loss_refinement",l.target.value),value:t.stop_loss_refinement,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Stop Loss Refinement Size (pips)"}),e.jsx("input",{disabled:t.stop_loss_refinement===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.copy_stop_loss===1||t.stop_loss_refinement===1?"text-textdisablecolor":"text-white"}`,value:y,onChange:k})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Take Profit Refinement"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{disabled:t.copy_take_profit===1,className:"text-whtie",onChange:l=>p("take_profit_refinement",l.target.value),value:t.take_profit_refinement,children:[e.jsx("option",{value:0,children:"Yes"}),e.jsx("option",{value:1,children:"No"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Take Profit Refinement Size (pips)"}),e.jsx("input",{disabled:t.take_profit_refinement===1,className:`select-none px-2 w-full h-12 rounded-[10px] bg-transparent border-[2px] border-[#ffffff10] outline-none ${t.copy_take_profit===1||t.take_profit_refinement===1?"text-textdisablecolor":"text-white"}`,value:j,onChange:V})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-color5",children:"Trading Status"}),e.jsx("div",{className:"input-styled-select",children:e.jsxs("select",{className:"text-white",value:b,disabled:!0,children:[e.jsx("option",{value:"Connected",children:"Connected"}),e.jsx("option",{value:"Stopped",children:"Stopped"}),e.jsx("option",{value:"Running",children:"Running"})]})})]})]})}),e.jsxs("div",{className:"px-6 w-full flex flex-col md:flex-row items-center justify-end gap-4",children:[e.jsx(K,{text:"GO BACK",className:"h-[56px] w-full md:w-[184px]",handleClick:G}),e.jsx(W,{text:"UPDATE",className:"h-[56px] w-full md:w-[184px]",handleClick:Y})]})]})})},ie=({account_id:N,type:R,profitShare:s,copierProfitShareMethod:b,setCopierData:C})=>{const w=O(),z=U(),[x,o]=a.useState("per_hour"),[t,d]=a.useState("yes");a.useEffect(()=>{b&&o(b)},[]);const m=()=>{w("/dashboard/copiers")},f=async()=>{await z(se({account_id:N,type:R,profit_share_method:x,follow_profit_share_change:t})).then(h=>{C(h),E.success("Updated Successfully!")})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"px-4 my-12 w-full flex flex-col gap-8",children:[e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-white",children:"Profit Share"}),e.jsx("div",{className:"input-styled-select",children:e.jsx("select",{value:x,onChange:h=>o(h.target.value),className:"h-12 w-40 bg-transparent text-white border-2 border-color4 rounded-lg",children:e.jsx("option",{value:"per_hour",children:"Hourly"})})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"text-white",children:"Amount ($)"}),e.jsx("input",{value:s==null?void 0:s.per_hour,className:"px-2 h-12 w-full bg-transparent text-white border-2 border-color4 rounded-lg",disabled:!0})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"text-white",children:"Risk Setting For Profit Sharing"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 flex items-center justify-center rounded-full border border-color4",children:e.jsx("div",{className:`w-3 h-3 rounded-full hover:bg-color1 ${t==="yes"&&"bg-color1"} cursor-pointer`,onClick:()=>d("yes")})}),e.jsx("p",{className:"text-sm text-white",children:"Agree to continue to follow the price even if the master changes it."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 flex items-center justify-center rounded-full border border-color4",children:e.jsx("div",{className:`w-3 h-3 rounded-full hover:bg-color1 ${t==="no"&&"bg-color1"} cursor-pointer`,onClick:()=>d("no")})}),e.jsx("p",{className:"text-sm text-white",children:"Stop following when the master changes the price."})]})]}),e.jsxs("div",{className:"px-6 w-full flex flex-col md:flex-row items-center justify-end gap-4",children:[e.jsx(K,{text:"GO BACK",className:"h-[56px] w-full md:w-[184px]",handleClick:m}),e.jsx(W,{text:"UPDATE",className:"h-[56px] w-full md:w-[184px]",handleClick:f})]})]})})},ue=()=>{const[N,R]=X(),s=U(),[b,C]=a.useState(""),[w,z]=a.useState(""),[x,o]=a.useState(0),[t,d]=a.useState(""),[m,f]=a.useState({account_id:"",type:"",follow_tp_st:{},risk_type:"",risk_setting:"",force_min_max:{},trade_setting:{},my_master_name:"",account_name:"",profit_share_method:""}),[h,v]=a.useState({}),[y,g]=a.useState(!1),j=_=>{o(_)};return a.useEffect(()=>{const _=N.get("account_id");_&&C(_);const p=N.get("type");p&&z(p);const S=N.get("status");S&&d(S),(async()=>{g(!0),await s(te(_||"",p||"")).then(k=>{f(k.data),v(k.profit_share),g(!1)}).catch(()=>{g(!1)})})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col items-center gap-10",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(Z,{title:"Copier Setting"})}),e.jsxs("div",{className:"relative w-full flex justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",className:"absolute bottom-4 right-4"}),y?e.jsx(le,{}):e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto flex flex-col gap-6 items-end lg:flex-row lg:justify-between lg:items-center",children:e.jsx("div",{className:"p-2 customized-scrollbar-x w-full overflow-auto",children:e.jsxs("div",{className:"mx-auto lg:mx-0 w-[450px] flex gap-6",children:[e.jsx("div",{className:`h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${x===0?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>j(0),children:"Profit Sharing"}),e.jsx("div",{className:`h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${x===1?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>j(1),children:"Risk Settings"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${x===2?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>j(2),children:"Position Settings"})]})})}),e.jsxs("div",{className:"copier-accounts-box mx-auto",children:[x===0&&e.jsx(ie,{account_id:b,type:w,profitShare:h,copierProfitShareMethod:m.profit_share_method,setCopierData:f}),x===1&&e.jsx(ae,{account_id:b,type:w,copierData:m,setCopierData:f}),x===2&&e.jsx(oe,{account_id:b,type:w,copierData:m,tradingStatus:t,setCopierData:f})]})]})]})]})})};export{ue as default};
