import{j as e,u as z,r as d,b as P,a as H,t as i,h as C,l as q,B as Y,k as F}from"./index-CSIaQKEl.js";import{s as I,a as V,b as G,g as U}from"./DashboardActions-2gsD8Fon.js";import{T as W}from"./TitleComponent-b_6u_W2v.js";import{C as O}from"./CustomPagination-lAq2o0SG.js";import{D as K}from"./DataLoading-C2IfdFrh.js";import{h as J}from"./moment-C5S46NFB.js";/* empty css                *//* empty css                  */const Q=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-6 copier-accounts-column",children:e.jsxs("div",{className:"copier-accounts-item h-[40px] flex text-base text-color5 border-b-2 border-color4",children:[e.jsx("div",{className:"basis-[25%] flex justify-end",children:"ACCOUNT NAME"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"PnL ($)"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"Next Billing"}),e.jsx("div",{className:"pl-6 basis-[15%] flex justify-start",children:"TYPE"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"My Master"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"STATUS"}),e.jsx("div",{className:"basis-[10%] flex justify-center",children:"ACTION"})]})})}),_=({isDataLoading:T,data:x,isChange:l,setIsChange:N})=>{const p=z(s=>s.auth),[c,h]=d.useState(0),[k,r]=d.useState(!1),[f,D]=d.useState(5),b=P(),u=H(),S=(s,a,t,n)=>{s&&b(`/dashboard/copiers/action?account_id=${a}&my_master=${t}&account_type=${n}&action=new`)},j=(s,a,t,n)=>{r(!0),(s==="Running"||s==="Stopped"||s==="Connected")&&(b(`/dashboard/copiers/action?account_id=${a}&my_master=${t}&account_type=${n}&action=change`),r(!1))},w=async(s,a,t,n,o)=>{if(r(!0),s==="Running")i.warning("This account is in Running mode!"),r(!1);else{const v=C({copier_acc_id:a,copier_acc_type:t,master_acc_id:n,my_master_type:o});await u(I({encrypted:v})).then(E=>{E===200&&(N(!l),i.success("Start trading from now!"),u(q())),E===201&&i.warning("Insufficient balance!"),r(!1)}).catch(()=>{i.error("Network status error!"),r(!1)})}},M=async(s,a,t,n,o)=>{if(r(!0),s!=="Running")i.warning("This account is not in Running mode!"),r(!1);else{const v=C({copier_acc_id:a,copier_acc_type:t,master_acc_id:n,my_master_type:o});await u(V({encrypted:v})).then(()=>{N(!l),i.success("Successfully stopped trading!"),r(!1),u(q())}).catch(()=>{r(!1),i.error("Network status error!")})}},$=async(s,a,t,n,o)=>{if(r(!0),s==="Running"||s==="Stopped"||s==="Connected"){const v=C({copier_acc_id:a,copier_acc_type:t,master_acc_id:n,my_master_type:o});await u(G({encrypted:v})).then(()=>{N(!l),i.success("Successfully disconnected master."),r(!1),u(q())}).catch(()=>{i.error("Network status error!"),r(!1)})}else i.warning("This account has no master."),r(!1)},g=s=>{const a=parseInt(s.target.value);D(a),h(0)},y=()=>{h(c===0?0:c-1)},A=()=>{(c+1)*f>=x.length?h(c):h(c+1)},L=(s,a,t)=>{b(`/dashboard/copiers/copiersetting?account_id=${a}&type=${t}&status=${s}`)},R=(s,a)=>{b(`/dashboard/copiers/tradinghistory?account_id=${s}&type=${a}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"copier-accounts-box customized-scrollbar-x overflow-x-auto mx-auto",children:[e.jsx(Q,{}),e.jsx("div",{className:`customized-scrollbar-y overflow-y-auto copier-accounts-data mx-auto flex flex-col ${!x.length&&"items-center justify-center"}`,children:T?e.jsx(K,{}):x.length>0?x.map((s,a)=>a<(c+1)*f&&a>=c*f&&e.jsxs("div",{className:"copier-accounts-item h-[80px] flex items-center border-b-color4 border-b-2",children:[e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center",children:e.jsxs("div",{className:"relative w-[64px] h-[64px] border-color2 border-2 rounded-full",children:[p.user.avatar?e.jsx("img",{src:p.user.avatar,alt:"Copier Account Avatar",title:"This is avatar for account",className:"w-[60px] h-[60px] rounded-full"}):e.jsx("img",{src:"/icons/user-icon.webp",alt:"User icon",title:"This is default avatar",className:"w-[60px] h-[60px] rounded-full"}),e.jsx("img",{src:"/icons/verify-icon.webp",alt:"Verify icon",title:"This is checkmark icon",className:"absolute bottom-[0px] right-[0px]  w-[15px] h-[15px]"})]})}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[100px] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s==null?void 0:s.account_name})}),e.jsx("div",{className:`h-[80px] basis-[15%] flex justify-end items-center ${(s==null?void 0:s.total_pl_amount)>0?"text-positivecolor":"text-color2"} text-base`,children:"$ "+(s!=null&&s.total_pl_amount?s==null?void 0:s.total_pl_amount.toFixed(2):0)}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:J(s==null?void 0:s.next_billing_date).format("YYYY/MM/DD")}),e.jsxs("div",{className:"pl-6 h-[80px] basis-[15%] flex justify-start items-center text-white text-base",children:[(s==null?void 0:s.type)==="mt4"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader4-square.webp",alt:"Metatrader4 square icon",title:"This is square logo to show metatrader4",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 4"})]}),(s==null?void 0:s.type)==="mt5"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader5-square.webp",alt:"Metatrader5 square icon",title:"This is square logo to show metatrader5",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 5"})]}),(s==null?void 0:s.type)==="tll"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",alt:"Tradelocker square icon",title:"This is square logo to show tradelocker",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - Li"})]}),(s==null?void 0:s.type)==="tld"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",alt:"Tradelocker square icon",title:"This is square logo to show tradelocker",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - De"})]})]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[100px] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s!=null&&s.my_master_name?s==null?void 0:s.my_master_name:"Not Set"})}),e.jsxs("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:[(!(s!=null&&s.status)||(s==null?void 0:s.status)==="Nothing")&&(s!=null&&s.permission?e.jsx("p",{className:"text-white",children:"N/A"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Connected"&&(s!=null&&s.permission?e.jsx("p",{className:"text-color1",children:"Connected"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Stopped"&&(s!=null&&s.permission?e.jsx("p",{className:"text-[#E66C12]",children:"Stopped"}):e.jsx("p",{className:"text-color2",children:"Expired"})),(s==null?void 0:s.status)==="Running"&&(s!=null&&s.permission?e.jsx("p",{className:"text-[#39DC01]",children:"Running"}):e.jsx("p",{className:"text-color2",children:"Running"}))]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-center items-center text-white",children:s!=null&&s.status&&(s==null?void 0:s.status)!=="Nothing"?e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`w-[30px] h-[30px] border border-color4 
                              rounded-md flex items-center justify-center text-[28px]
                              ${(s==null?void 0:s.permission)&&"hover:border-color2 hover:text-color2"} cursor-pointer duration-300`,children:e.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("g",{id:"SVGRepo_iconCarrier",children:e.jsx("path",{className:`fill-white ${(s==null?void 0:s.permission)&&"group-hover:fill-color2"} duration-300`,d:`M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 
                                    28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 
                                    364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 
                                    49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 
                                    1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 
                                    109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 
                                    828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 
                                    1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 
                                    357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 
                                    32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 
                                    42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 
                                    64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 
                                    20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 
                                    27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 
                                    113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 
                                    20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 
                                    288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 
                                    1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 
                                    24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 
                                    128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z`})})]})}),e.jsx("div",{className:`z-10 absolute right-0 w-48 bg-color3 border border-color4 rounded-lg ${s!=null&&s.permission?k?"hidden":"hidden group-hover:block":"hidden"}`,children:e.jsxs("ul",{className:"px-4 py-3 text-sm text-white",children:[e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>w(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Start Trading"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>M(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Stop Trading"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>j(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.my_master_id,s==null?void 0:s.type),children:"Change Master"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>$(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type,s==null?void 0:s.my_master_id,s==null?void 0:s.my_master_type),children:"Disconnect Master"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>L(s==null?void 0:s.status,s==null?void 0:s.account_id,s==null?void 0:s.type),children:"Manage Copier"}),e.jsx("li",{className:"py-1 cursor-pointer hover:text-color2",onClick:()=>R(s==null?void 0:s.account_id,s==null?void 0:s.type),children:"Trading History"})]})})]}):e.jsx("div",{className:`w-[30px] h-[30px] border border-color4 
                            rounded-md flex items-center justify-center text-[28px]
                            ${(s==null?void 0:s.permission)&&"hover:border-color2 hover:text-color2"} cursor-pointer duration-300`,onClick:()=>S(s==null?void 0:s.permission,s==null?void 0:s.account_id,s==null?void 0:s.my_master_id,s==null?void 0:s.type),children:"+"})})]},a)):e.jsx("p",{className:"py-32 text-2xl text-white font-bold",children:"No account has been added."})})]}),e.jsxs("div",{className:"copier-accounts-box mx-auto relative mt-8 w-full flex flex-col gap-5 items-center  lg:flex-row lg:justify-start 2xl:justify-center",children:[e.jsx(O,{currentPage:c,totalPageNum:Math.floor(((x==null?void 0:x.length)-1)/f),handleClickPrevButton:y,handleClickNextButton:A,setCurrentPage:h}),e.jsxs("div",{className:"flex lg:absolute lg:right-0 items-center gap-2",children:[e.jsx("label",{className:"text-white text-base",children:"Display:"}),e.jsx("div",{className:"display-styled-select",children:e.jsxs("select",{value:f,onChange:g,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})})]})]})]})},cs=()=>{const T=z(y=>y.auth),x=H(),[l,N]=d.useState(0),[p,c]=d.useState(!1),[h,k]=d.useState([]),[r,f]=d.useState([]),[D,b]=d.useState([]),[u,S]=d.useState([]),[j,w]=d.useState(!1),M=P();d.useEffect(()=>{(async()=>{w(!0);const A={user_id:T.user.id},L=C(A);await x(U({encrypted:L})).then(R=>{const s=F(R.encrypted);k(s);const a=s.filter(o=>{if(o.type==="tll"||o.type==="tld")return o});f(a);const t=s.filter(o=>{if(o.type==="mt4")return o});b(t);const n=s.filter(o=>{if(o.type==="mt5")return o});S(n),w(!1)})})()},[p]);const $=()=>{M("/dashboard/integrations/copiers/selectplatform")},g=y=>{N(y)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(W,{title:"Copiers"})}),e.jsx("div",{className:"mt-8 mb-4 w-full flex justify-end",children:e.jsx(Y,{text:"+ ADD",className:"h-[56px] w-full md:w-[186px]",handleClick:$})}),e.jsxs("div",{className:"relative w-full flex justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",alt:"Top left icon",title:"This is general icon",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",alt:"Top right icon",title:"This is general icon",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",alt:"Bottom left icon",title:"This is general icon",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",alt:"Bottom right icon",title:"This is general icon",className:"absolute bottom-4 right-4"}),e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto flex flex-col gap-6 items-end lg:flex-row lg:justify-between lg:items-center",children:e.jsx("div",{className:"p-2 customized-scrollbar-x w-full overflow-auto",children:e.jsxs("div",{className:"mx-auto md:mx-0 w-[460px] flex gap-6",children:[e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${l===0?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(0),children:"All Accounts"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${l===1?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(1),children:"TradeLocker"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${l===2?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(2),children:"MetaTrader4"}),e.jsx("div",{className:`inline-block h-[28px] text-base cursor-pointer hover:border-b hover:border-b-color2 ${l===3?"text-white font-bold border-b border-b-color2":"text-color5"}`,onClick:()=>g(3),children:"MetaTrader5"})]})})}),l===0&&e.jsx(_,{isDataLoading:j,data:h,isChange:p,setIsChange:c}),l===1&&e.jsx(_,{isDataLoading:j,data:r,isChange:p,setIsChange:c}),l===2&&e.jsx(_,{isDataLoading:j,data:D,isChange:p,setIsChange:c}),l===3&&e.jsx(_,{isDataLoading:j,data:u,isChange:p,setIsChange:c})]})]})]})})};export{cs as default};
