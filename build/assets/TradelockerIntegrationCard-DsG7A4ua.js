import{g as E,u as P,a as $,b as M,r as d,j as e,B as Y,k as w,t as o}from"./index-CJc2CFJM.js";import{v as R,w as G,x as A,y as T,z as W,A as z}from"./DashboardActions-CYexjiQE.js";import{S as K}from"./SettingCard-DWlM0Nhf.js";import{I as O,a as q}from"./IntegrationUploadImage-DYmhkdsg.js";import{B as H}from"./ButtonComponentWhite-COzNBntd.js";import{D as v,U as J}from"./uploading-HGN6G2Nn.js";import{l as Q}from"./stack-BlqWHnTg.js";const re=({role:r})=>{const[k,V]=E(),u=P(s=>s.auth),l=$(),m=M(),[I,h]=d.useState(!1),[a,C]=d.useState({acc_name:"",acc_password:"",acc_id:"",acc_email:"",server_name:""}),[i,S]=d.useState(0),[b,F]=d.useState({per_hour:"0"}),[N,B]=d.useState(""),[f,U]=d.useState(v),[j,y]=d.useState(1);d.useEffect(()=>{const s=k.get("level_index"),t=k.get("type");s&&(s!=="0"&&s!=="1"&&s!=="2"&&s!=="3"&&m("/dashboard/integrations/home"),S(parseInt(s))),t==="demo"&&y(0),t==="live"&&y(1)},[]);const D=async()=>{const s={email:a.acc_email.trim(),password:a.acc_password,server:a.server_name.trim()};h(!0),j===0?await R(s).then(async t=>{await G(t.accessToken).then(async n=>{let g=!1,x=0,p=0;for(let c=0;c<n.length;c++)if(n[c].id===a.acc_id){g=!0,x=parseInt(n[c].accNum),p=parseFloat(n[c].accountBalance);break}g?r==="master"?await l(A({acc_num:x,account_balance:p,access_token:t.accessToken,refresh_token:t.refreshToken,acc_email:a.acc_email,acc_id:a.acc_id,acc_password:a.acc_password,server_name:a.server_name,acc_name:a.acc_name,type:"tld",id:u.user.id,profit_share:b,description:N,avatar:f===v?"":f,index_level:i})).then(async c=>{await l(w()),c.status===200?o.success("Master Account Added Successfully!"):c.status===201&&o.warning(c.data),m("/dashboard/masters")}):r==="copier"&&await l(T({acc_num:x,account_balance:p,access_token:t.accessToken,refresh_token:t.refreshToken,acc_email:a.acc_email,acc_id:a.acc_id,acc_password:a.acc_password,server_name:a.server_name,acc_name:a.acc_name,type:"tld",id:u.user.id,avatar:u.user.avatar})).then(async c=>{await l(w()),c.status===200?o.success("Copier Account Added Successfully!"):c.status===201&&o.warning(c.data),m("/dashboard/copiers")}):o.warning("No account exist!"),h(!1)})}).catch(()=>{o.error("No this account exists!"),h(!1)}):j===1&&await W(s).then(async t=>{await z(t.accessToken).then(async n=>{let g=!1,x=0,p=0;for(let c=0;c<n.length;c++)if(n[c].id===a.acc_id){p=parseInt(n[c].accNum),x=parseFloat(n[c].accountBalance),g=!0;break}g?r==="master"?await l(A({acc_num:p,account_balance:x,access_token:t.accessToken,refresh_token:t.refreshToken,acc_email:a.acc_email,acc_id:a.acc_id,acc_password:a.acc_password,server_name:a.server_name,acc_name:a.acc_name,type:"tll",id:u.user.id,profit_share:b,description:N,avatar:f===v?"":f,index_level:i})).then(async()=>{await l(w()),o.success("Master Account Added Successfully!"),m("/dashboard/masters")}):r==="copier"&&await l(T({acc_num:p,acc_email:a.acc_email,acc_id:a.acc_id,acc_password:a.acc_password,server_name:a.server_name,acc_name:a.acc_name,type:"tll",id:u.user.id,avatar:u.user.avatar})).then(async()=>{await l(w()),o.success("Copier Account Added Successfully!"),m("/dashboard/copiers")}):o.warning("No account exist!"),h(!1)})}).catch(()=>{o.error("No this account exists!"),h(!1)})},_=(s,t)=>{C({...a,[s]:t})},L=()=>{r==="master"&&m(`/dashboard/integrations/masters/selectplatform?index=${i}`),r==="copier"&&m("/dashboard/integrations/copiers/selectplatform")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-16",children:e.jsxs("div",{className:"relative w-full h-auto rounded-xl rounded-tl-[30px] border-2 border-color4 bg-gradient-to-br from-[#FFFFFF03] to-[#FFFFFF01]",children:[e.jsx("img",{src:"/icons/tradelocker-left.webp",className:"absolute top-0 left-0 w-[100px] h-[100px]"}),e.jsx("img",{src:"/icons/top-right.webp",className:"absolute top-[18px] right-[18px] w-[67px] h-[67px]"}),e.jsx("img",{src:"/icons/bottom-right.webp",className:"absolute bottom-[18px] right-[18px] w-[67px] h-[67px]"}),e.jsx("img",{src:"/icons/bottom-left.webp",className:"absolute bottom-[18px] left-[18px] w-[67px] h-[67px]"}),e.jsx("div",{className:"my-16 flex items-center justify-center",children:I?e.jsx(O,{}):e.jsxs("div",{className:"w-[80%] flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"w-full flex items-center gap-5",children:[e.jsxs("h2",{className:"hidden md:block text-[32px] text-white",children:["Tradelocker ",r==="master"?"Master":"Copier"]}),e.jsx("h2",{className:"block md:hidden text-[32px] text-white",children:"Tradelocker"}),r==="master"&&i?e.jsx("img",{src:Q[i],className:"h-[28px]"}):e.jsx(e.Fragment,{})]}),e.jsx("div",{className:"mt-8 w-full font-bold text-xl text-white",children:"Basic information :"}),e.jsxs("div",{className:"my-8 w-full flex-col flex lg:flex-row lg:justify-between gap-6 lg:gap-0",children:[e.jsx("div",{className:`${r==="copier"&&"hidden"} w-[130px] h-[130px] rounded-full border-4 ${i===3?"border-herocolor":i===2?"border-goldcolor":i===1?"border-silvercolor":"border-color4"}`,children:e.jsx(q,{avatarURL:f,setAvatarURL:U,DefaultImage:v,UploadingAnimation:J,className:"w-[122px] h-[122px]",className1:"bottom-12 right-[68px]",className2:"bottom-12 right-[32px]"})}),e.jsxs("div",{className:`${r==="master"?"integration-input-group":"w-full"} grid grid-cols-1 md:grid-cols-2 gap-4`,children:[e.jsx("input",{type:"email",value:a.acc_email,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Account Email",onChange:s=>_("acc_email",s.target.value)}),e.jsx("input",{value:a.acc_id,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Account Id",onChange:s=>_("acc_id",s.target.value)}),e.jsx("input",{type:"password",value:a.acc_password,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Account Password",onChange:s=>_("acc_password",s.target.value)}),e.jsx("input",{value:a.server_name,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Your Tradelocker Server Name",onChange:s=>_("server_name",s.target.value)}),e.jsx("input",{value:a.acc_name,className:"focus:outline-none h-[56px] rounded-lg border-2 border-color4 px-4 text-white text-sm bg-transparent",placeholder:"Input Account Name (Displayed on this platform)",onChange:s=>_("acc_name",s.target.value)})]})]}),e.jsx("div",{className:`w-full ${r==="copier"&&"hidden"}`,children:e.jsx(K,{profit:b,setProfit:F,description:N,setDescription:B})}),e.jsxs("div",{className:"mt-6 w-full flex justify-end gap-5",children:[e.jsx(H,{text:"GO BACK",className:"w-full sm:w-[216px] h-[56px]",handleClick:L}),e.jsx(Y,{text:"+ ADD",className:"w-full sm:w-[216px] h-[56px]",handleClick:D})]})]})})]})})})};export{re as T};
