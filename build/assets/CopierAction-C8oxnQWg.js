import{j as e,u as q,g as R,r as t,b as $,a as z,B as G,h as U,t as M}from"./index-D3mr-EkT.js";import{c as W,e as K}from"./DashboardActions-B9-8Vap5.js";import{B as P}from"./ButtonComponentWhite-D_1gDXib.js";import{T as H}from"./TitleComponent-1N1_GeoH.js";import{D as J}from"./DataLoading-9D2iJcRo.js";import{C as Q}from"./CustomPagination-C5xXN1I2.js";import{l as N}from"./stack-BlqWHnTg.js";import{h as V}from"./moment-C5S46NFB.js";/* empty css                *//* empty css                  */const X=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-6 copier-accounts-column",children:e.jsxs("div",{className:"copier-accounts-item h-[40px] flex text-base text-color5 border-b-2 border-color4",children:[e.jsx("div",{className:"basis-[30%] flex justify-end",children:"ACCOUNT NAME"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"PnL ($)"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"WIN RATE"}),e.jsx("div",{className:"pl-8 basis-[20%] flex justify-start",children:"TYPE"}),e.jsx("div",{className:"basis-[15%] flex justify-end",children:"REGISTER DATE"}),e.jsx("div",{className:"basis-[10%] flex justify-end",children:"FOLLOWS"}),e.jsx("div",{className:"pr-2 basis-[10%] flex justify-center",children:"ACTION"})]})})}),Z=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-[320px] bg-transparent flex items-center justify-center",children:e.jsxs("div",{role:"status",className:"flex flex-col items-center gap-5",children:[e.jsx("img",{src:"/icons/preloader.gif",className:"size-[100px]",alt:"website preloader"}),e.jsx("span",{className:"text-2xl font-bold text-color5",children:"Connecting to master..."})]})})}),ee=({value:o,handleChange:a})=>e.jsx(e.Fragment,{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"custom-checkbox",checked:o,onChange:a}),e.jsx("span",{className:"custom-checkbox"})]})}),se=({isDataLoading:o,data:a,setMasterData:w,setSelectedAccId:d,setMasterType:g,isConnecting:y,currentPage:i,setCurrentPage:n,displayCount:h,setDisplayCount:C,totalCount:b})=>{const r=q(s=>s.auth),x=(s,c)=>{const p=a.map((f,j)=>s===j?(d(f.account_id),g(c),{...f,action:!0}):{...f,action:!1});w(p)},u=s=>{const c=parseInt(s.target.value);C(c),n(0)},T=()=>{n(i===0?0:i-1)},m=()=>{(i+1)*h>=b?n(i):n(i+1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"copier-accounts-box customized-scrollbar-x overflow-x-auto mx-auto",children:[e.jsx(X,{}),e.jsx("div",{className:`copier-accounts-data mx-auto flex flex-col ${!(a!=null&&a.length)&&"items-center justify-center"}`,children:o?e.jsx(J,{}):y?e.jsx(Z,{}):(a==null?void 0:a.length)>0?a.map((s,c)=>e.jsxs("div",{className:"copier-accounts-item h-[80px] flex items-center border-b-color4 border-b-2",children:[e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center",children:e.jsxs("div",{className:`relative w-[64px] h-[64px] rounded-full border-2 
                        ${s.level==="hero"?"border-herocolor":s.level==="gold"?"border-goldcolor":s.level==="silver"?"border-silvercolor":"border-color5"}`,children:[s.avatar?e.jsx("img",{src:s.avatar,className:"w-[60px] h-[60px] rounded-full"}):e.jsx("img",{src:"/icons/user-icon.webp",className:"w-[60px] h-[60px] rounded-full"}),e.jsx("img",{src:s.level==="hero"?N[3]:s.level==="gold"?N[2]:s.level==="silver"?N[1]:N[0],className:`${(s.level==="basic"||!s.level)&&"hidden"} absolute bottom-[-2px] right-[-3px]  w-[20px] h-[20px]`})]})}),e.jsx("div",{className:"h-[80px] basis-[20%] flex justify-end items-center text-white text-base",children:e.jsx("div",{className:"inline-block w-[90%] whitespace-nowrap overflow-hidden text-ellipsis text-right",children:s.account_name})}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:"0%"}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:s.win_count+s.lose_count>0?(s.win_count/(s.win_count+s.lose_count)*100).toFixed(2)+" %":"0 %"}),e.jsxs("div",{className:"pl-8 h-[80px] basis-[20%] flex justify-start items-center text-white text-base",children:[s.type==="mt4"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader4-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 4"})]}),s.type==="mt5"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/metatrader5-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"MT - 5"})]}),s.type==="tll"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - Li"})]}),s.type==="tld"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/icons/tradelocker-square.webp",className:"w-[37px] h-[36px]"}),e.jsx("p",{className:"text-base text-white",children:"TL - De"})]})]}),e.jsx("div",{className:"h-[80px] basis-[15%] flex justify-end items-center text-white text-base",children:V(s.registered_at).format("YYYY/MM/DD")}),e.jsxs("div",{className:"h-[80px] basis-[10%] flex justify-end items-center text-white text-base",children:[s.follows+"/",s.level==="hero"?"âˆž":s.level==="gold"?r.levelToLimit[2].limit_value:s.level==="silver"?r.levelToLimit[1].limit_value:r.levelToLimit[0].limit_value]}),e.jsx("div",{className:"h-[80px] basis-[10%] flex justify-center items-center text-white",children:e.jsx(ee,{value:s.action,handleChange:()=>x(c,s.type)})})]},c)):e.jsx("p",{className:"text-2xl text-white font-bold",children:"No account has been added."})})]}),e.jsxs("div",{className:"copier-accounts-box mx-auto relative mt-8 w-full flex flex-col gap-5 items-center lg:flex-row lg:justify-start 2xl:justify-center",children:[e.jsx(Q,{currentPage:i,totalPageNum:Math.floor((b-1)/h),handleClickPrevButton:T,handleClickNextButton:m,setCurrentPage:n}),e.jsxs("div",{className:"flex lg:absolute lg:right-0 items-center gap-2",children:[e.jsx("label",{className:"text-white text-base",children:"Display:"}),e.jsx("div",{className:"display-styled-select",children:e.jsxs("select",{value:h,onChange:u,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})})]})]})]})},ue=()=>{const[o,a]=R(),[w,d]=t.useState([]),[g,y]=t.useState(""),[i,n]=t.useState("new"),[h,C]=t.useState(""),[b,r]=t.useState(""),[x,u]=t.useState(""),[T,m]=t.useState(!1),[s,c]=t.useState(!1),[p,f]=t.useState(0),[j,I]=t.useState(5),[E,B]=t.useState(0),S=$(),D=z();t.useEffect(()=>{const A=o.get("account_id");A&&y(A);const k=o.get("account_type");k&&C(k);const L=o.get("action");L&&n(L);const O=o.get("my_master");(async()=>{m(!0),await D(W(0,p,j)).then(v=>{if(v.totalCount&&B(v.totalCount),x){const _=v.accounts.map(l=>x===l.account_id?(u(l.account_id),{...l,action:!0}):{...l,action:!1});d(_)}else{const _=v.accounts.map(l=>O===l.account_id?(u(l.account_id),r(l.type),{...l,action:!0}):{...l,action:!1});d(_)}m(!1)}).catch(()=>{m(!1)})})()},[j,p]);const F=()=>{S("/dashboard/copiers")},Y=async()=>{c(!0),x?await D(K(g,h,x,b,i)).then(async()=>{await D(U()),M.success("Your copier has been connected to your master. Now you can start copy trading!"),S("/dashboard/copiers"),c(!1)}).catch(()=>{c(!1)}):(M.warning("Please select your master!"),c(!1))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-full mt-10",children:e.jsx(H,{title:"Copiers"})}),e.jsxs("div",{className:"w-full flex flex-col sm:flex-row justify-between gap-4 md:gap-0",children:[e.jsx(P,{text:"GO BACK",className:"w-full sm:w-[180px] md:w-[216px] h-[56px]",handleClick:F}),e.jsx(G,{text:"CONNECT",className:"w-full sm:w-[180px] md:w-[216px] h-[56px]",handleClick:Y})]}),e.jsxs("div",{className:"relative w-full justify-center border-2 border-color4 rounded-xl",children:[e.jsx("img",{src:"/icons/top-left.webp",className:"absolute top-4 left-4"}),e.jsx("img",{src:"/icons/top-right.webp",className:"absolute top-4 right-4"}),e.jsx("img",{src:"/icons/bottom-left.webp",className:"absolute bottom-4 left-4"}),e.jsx("img",{src:"/icons/bottom-right.webp",className:"absolute bottom-4 right-4"}),e.jsxs("div",{className:"py-16 w-full",children:[e.jsx("div",{className:"copier-accounts-box mx-auto overflow-auto",children:e.jsx("h3",{className:"customized-scrollbar-x w-[140px] text-base text-white",children:"Select Your Master"})}),e.jsx(se,{setMasterType:r,isDataLoading:T,isConnecting:s,data:w,setMasterData:d,setSelectedAccId:u,currentPage:p,setCurrentPage:f,displayCount:j,setDisplayCount:I,totalCount:E})]})]})]})})};export{ue as default};
